"use strict";

(function () {
	//for SVG-elements in IE
	svg4everybody();
})();

//запустить какую-либо функцию, если element существует на странице
var forElement = function forElement(element) {
	return new Promise(function (resolve) {
		if (element) {
			resolve();
		}
	});
};

//проверка на мобильное устройство
var isMobile = {
	Android: function Android() {
		return navigator.userAgent.match(/Android/i);
	},
	BlackBerry: function BlackBerry() {
		return navigator.userAgent.match(/BlackBerry/i);
	},
	iOS: function iOS() {
		return navigator.userAgent.match(/iPhone|iPad|iPod/i);
	},
	Opera: function Opera() {
		return navigator.userAgent.match(/Opera Mini/i);
	},
	Windows: function Windows() {
		return navigator.userAgent.match(/IEMobile/i);
	},

	any: function any() {
		return isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows();
	}
};
//Flip effect
(function () {
	document.addEventListener("DOMContentLoaded", function () {

		var authorize = document.getElementById("authorize"),
		    flipClass = "flipper";

		//login form
		if (authorize) {
			authorize.addEventListener("click", runFlip);

			//перевернуть карту при клике вне ее
			document.body.addEventListener("click", function (e) {
				if (!e) e = window.event;
				var elems = e.path,
				    flag = true;

				for (var i = 0; i < elems.length; i++) {
					if (elems[i].id === "authorize" || elems[i].id === "login") {
						flag = false;
					}
				}

				if (flag) document.getElementById("login").classList.remove(flipClass);
			});
		}

		//flip effect
		function runFlip() {
			var elem = document.getElementById(this.dataset.flipId),
			    classes = elem.classList;

			classes.contains(flipClass) === true ? classes.remove(flipClass) : classes.add(flipClass);
		}
	});
})();

//Parallax
(function () {
	document.addEventListener("DOMContentLoaded", function () {
		var layers = document.getElementsByClassName("parallax__layer"),
		    parallax = document.getElementById("parallax"),
		    wrapper = document.getElementsByClassName("wrapper")[0],
		    noParallax = document.createElement("div");

		var moveLaers = function moveLaers(e) {
			e = e || event;

			var initialX = window.innerWidth / 2 - e.pageX,
			    initialY = window.innerHeight / 2 - e.pageY;

			for (var i = 0; i < layers.length; i++) {
				var divider = void 0;

				if (layers.length >= 5) divider = i / 100;else divider = (i + 1) / 100;

				var X = initialX * divider,
				    Y = initialY * divider,
				    transformStyle = "translate3d(" + X + "px, " + Y + "px, " + "0)";

				layers[i].style.transform = transformStyle;
			}
		};

		if (isMobile.any()) {
			wrapper.removeChild(parallax);
			noParallax.className = "parallax bg_forest-bottom";
			wrapper.insertBefore(noParallax, document.getElementsByClassName("footer")[0]);
		} else {
			window.addEventListener("mousemove", moveLaers);
		}
	});
})();

//Main menu
//jQuery
$(function () {
	$('#toggle').on('click', function () {
		$(this).toggleClass('hamburger_on');
		$('#main-menu').toggleClass('main-menu_target');
	});
});

//Preloader
//jQuery
var preloader = function () {
	var percents = 0,
	    preloader = $("#preloader");

	var imgPath = $("*").map(function (i, el) {
		var bg = $(el).css("background-image"),
		    img = $(el).is("img"),
		    path = "";

		if (bg != "none") {
			path = bg.replace('url("', '').replace('")', '');;
		}

		if (img) {
			path = $(el).attr("src");
		}

		if (path) return path;
	});

	var setPercents = function setPercents(total, current) {
		var persents = Math.ceil(current / total * 100);

		$("#percrnts").text(persents);

		if (persents >= 100) {
			preloader.fadeOut();
		}
	};

	var loadImages = function loadImages(images) {

		if (!images.length) preloader.fadeOut();

		images.forEach(function (img, i, images) {
			var fakeImage = $("<img>", {
				attr: {
					src: img
				}
			});

			fakeImage.on("load error", function () {
				percents++;
				setPercents(images.length, percents);
			});
		});
	};

	return {
		init: function init() {
			var imgs = imgPath.toArray();

			loadImages(imgs);
		}
	};
}();

$(function () {
	preloader.init();
});

//Sidebar
//jQuery
var blog = document.getElementById("blog");

//если элемент blog существует
forElement(blog).then(function () {
	//модуль Sidebar
	var scrollSidebar = function () {
		var sidebar = $(".sidebar"),
		    menu = $(".sidebar-nav"),
		    link = $(".sidebar__link"),
		    article = $(".article"),
		    body = document.body,
		    isPositionArticle = [],
		    offsetHeight = $(".blog__content")[0].offsetTop - $(".main")[0].offsetTop;

		var positionArticle = function positionArticle(el) {
			for (var i = 0; i < el.length; i++) {
				isPositionArticle[i] = {};
				isPositionArticle[i].top = el.eq(i).offset().top - offsetHeight;
				isPositionArticle[i].bottom = isPositionArticle[i].top + el.eq(i).innerHeight();
			}
		};

		var menuFixed = function menuFixed() {
			var scroll = window.pageYOffset;

			if (scroll < article.offset().top) {
				sidebar.removeClass("fixed");
				$(".blog__content").removeClass("nav-fixed");
			} else {
				sidebar.addClass("fixed");
				$(".blog__content").addClass("nav-fixed");
			}
		};

		var scrollPage = function scrollPage(e) {
			var scroll = window.pageYOffset;

			for (var i = 0; i < isPositionArticle.length; i++) {
				if (scroll >= isPositionArticle[i].top && scroll <= isPositionArticle[i].bottom) {
					link.eq(i).addClass("sidebar__link_active").siblings().removeClass("sidebar__link_active");
				}
			}
		};

		var clickOnMenu = function clickOnMenu(e) {
			var index = $(e.target).index();
			var sectionOffset = article.eq(index).offset().top;
			$(document).off("scroll", scrollPage);
			$("body, html").animate({
				"scrollTop": sectionOffset
			}, function () {
				$(e.target).addClass("sidebar__link_active").siblings().removeClass("sidebar__link_active");
				$(document).on("scroll", scrollPage);
			});
		};

		var addListener = function addListener() {
			$(menu).on("click", clickOnMenu);

			$(document).on("scroll", scrollPage);
			$(document).on("scroll", menuFixed);

			$(window).on("load", function (e) {
				positionArticle(article);
			});

			$(window).on("resize", function (e) {
				positionArticle(article);
			});
		};

		return {
			init: addListener
		};
	}();

	scrollSidebar.init();

	//toggle class 
	$("#btn").on("click", function () {
		$("#blog").toggleClass("on");
	});
});

//Slider
var slider = document.getElementById("slider");

forElement(slider).then(function () {
	window.onload = function () {
		Slider.init();
	};

	var Slider = {
		init: function init() {
			this.display = document.getElementById("display");
			this.header = document.getElementById("header");
			this.description = document.getElementById("description");
			this.siteLink = document.getElementById("siteLink");
			this.btnPrew = document.getElementById("btnPrew");
			this.btnNext = document.getElementById("btnNext");
			this.btnPrewImg = document.getElementById("btnPrewImg");
			this.btnNextImg = document.getElementById("btnNextImg");

			this.works = [];

			this.duration = 1000;

			this.display.addEventListener("click", function () {
				Slider.animate({
					duration: 3000,
					timing: function timing(timeFraction) {
						return timeFraction;
					},
					draw: function draw(progress) {
						console.log(progress);
						Slider.display.style.opacity = progress;
					}
				});
			});

			//Ajax
			this.data("/assets/json/slider.json").then(function (dataArray) {
				for (var i = 0; i < dataArray.length; i++) {
					Slider.works.push(dataArray[i]);
					Slider.works[i].index = i;
				}
				//заполнить слайдер первоначальными данными
				Slider.clicking(0, dataArray.length - 1, 1);
			}).catch(function (status) {
				console.error("Код ответа: ", status);
			});

			//Events
			this.btnPrew.addEventListener("click", function (event) {
				var indexes = [Slider.display.dataset.index, Slider.btnPrewImg.dataset.index, Slider.btnNextImg.dataset.index];

				Slider.toggleIndexes(indexes, "minus");
				Slider.addAnimate(indexes[0], indexes[1], indexes[2]);
			});

			this.btnNext.addEventListener("click", function () {
				var indexes = [Slider.display.dataset.index, Slider.btnPrewImg.dataset.index, Slider.btnNextImg.dataset.index];

				Slider.toggleIndexes(indexes, "plus");
				Slider.addAnimate(indexes[0], indexes[1], indexes[2]);
			});
		},
		data: function data(url) {
			return new Promise(function (resolve, reject) {
				var xhr = new XMLHttpRequest();
				xhr.open("GET", url, true);
				xhr.responseType = "json";
				xhr.send();
				xhr.onreadystatechange = function () {
					if (xhr.readyState !== 4) return;
					if (xhr.status !== 200) {
						reject(xhr.status);
					} else {
						resolve(xhr.response);
					}
				};
			});
		},
		addTextBlock: function addTextBlock(index) {
			this.header.innerText = this.works[index].title;
			this.description.innerText = this.works[index].desc;
			this.siteLink.href = this.works[index].link;
		},
		addDisplay: function addDisplay(index) {
			this.display.src = this.works[index].image;
			this.display.alt = this.works[index].title;
			this.display.dataset.index = index;
		},
		addNextImg: function addNextImg(index) {
			this.btnNextImg.src = this.works[index].preview;
			this.btnNextImg.alt = this.works[index].title;
			this.btnNextImg.dataset.index = index;
		},
		addPrewImg: function addPrewImg(index) {
			this.btnPrewImg.src = this.works[index].preview;
			this.btnPrewImg.alt = this.works[index].title;
			this.btnPrewImg.dataset.index = index;
		},
		clicking: function clicking(displayIndex, prewIndex, nextIndex) {
			//main content in the slider: big picture, title, description and link
			this.addDisplay(displayIndex);
			this.addTextBlock(displayIndex);
			//small image on the button "previous work"
			this.addPrewImg(prewIndex);
			//small image on the button "next work"
			this.addNextImg(nextIndex);
		},
		toggleIndexes: function toggleIndexes(arr, type) {
			var max = this.works.length - 1;

			for (var i = 0; i < arr.length; i++) {
				switch (type) {
					case "plus":
						if (arr[i] == max) arr[i] = 0;else arr[i]++;
						break;
					case "minus":
						if (arr[i] == 0) arr[i] = max;else arr[i]--;
						break;
				}
			}
		},
		animate: function animate(options) {
			var start = performance.now();

			requestAnimationFrame(function animate(time) {
				// timeFraction от 0 до 1
				var timeFraction = (time - start) / options.duration;
				if (timeFraction > 1) timeFraction = 1;

				// текущее состояние анимации
				var progress = timeFraction;
				//функция, описывающая анимацию
				options.draw(progress);

				if (timeFraction < 1) {
					requestAnimationFrame(animate);
				}
			});
		},
		addAnimate: function addAnimate(i, j, k) {
			//анимация до переключения слайда
			Slider.animate({
				duration: Slider.duration,
				draw: function draw(progress) {
					Slider.btnPrewImg.style.marginTop = progress * 600 + "px";
					Slider.btnNextImg.style.marginTop = progress * -600 + "px";
					Slider.display.style.opacity = 1 - progress;
				}
			});

			setTimeout(function () {
				Slider.clicking(i, j, k);

				Slider.btnPrewImg.style.marginTop = 0 + "px";
				Slider.btnPrewImg.style.height = 0 + "%";
				Slider.btnNextImg.style.marginTop = 0 + "px";
				Slider.btnNextImg.style.height = 0 + "%";

				//анимация после переключения слайда
				Slider.animate({
					duration: Slider.duration,
					draw: function draw(progress) {
						Slider.btnPrewImg.style.height = progress * 100 + "%";
						Slider.btnNextImg.style.height = progress * 100 + "%";
						Slider.display.style.opacity = progress;
					}
				});
			}, Slider.duration + 100);
		}
	};
});

//Send mail

var formMail = document.querySelector('#mail');

if (formMail) {
	formMail.addEventListener('submit', prepareSendMail);
}

function prepareSendMail(e) {
	e.preventDefault();
	var data = {
		name: formMail.name.value,
		email: formMail.email.value,
		text: formMail.text.value
	};
	prepareSend('/works', formMail, data);
}

function prepareSend(url, form, data, cb) {
	var resultContainer = form.querySelector('.status');
	resultContainer.innerHTML = 'Sending...';
	sendAjaxJson(url, data, function (data) {
		form.reset();
		resultContainer.innerHTML = data;
		if (cb) {
			cb(data);
		}
	});
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImZsaXAuanMiLCJwYXJhbGxheC5qcyIsIm1haW5tZW51LmpzIiwicHJlbG9hZGVyLmpzIiwic2lkZWJhci5qcyIsInNsaWRlci5qcyIsIm1haWwuanMiXSwibmFtZXMiOlsic3ZnNGV2ZXJ5Ym9keSIsImZvckVsZW1lbnQiLCJlbGVtZW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJpc01vYmlsZSIsIkFuZHJvaWQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsIkJsYWNrQmVycnkiLCJpT1MiLCJPcGVyYSIsIldpbmRvd3MiLCJhbnkiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdXRob3JpemUiLCJnZXRFbGVtZW50QnlJZCIsImZsaXBDbGFzcyIsInJ1bkZsaXAiLCJib2R5IiwiZSIsIndpbmRvdyIsImV2ZW50IiwiZWxlbXMiLCJwYXRoIiwiZmxhZyIsImkiLCJsZW5ndGgiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImVsZW0iLCJkYXRhc2V0IiwiZmxpcElkIiwiY2xhc3NlcyIsImNvbnRhaW5zIiwiYWRkIiwibGF5ZXJzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBhcmFsbGF4Iiwid3JhcHBlciIsIm5vUGFyYWxsYXgiLCJjcmVhdGVFbGVtZW50IiwibW92ZUxhZXJzIiwiaW5pdGlhbFgiLCJpbm5lcldpZHRoIiwicGFnZVgiLCJpbml0aWFsWSIsImlubmVySGVpZ2h0IiwicGFnZVkiLCJkaXZpZGVyIiwiWCIsIlkiLCJ0cmFuc2Zvcm1TdHlsZSIsInN0eWxlIiwidHJhbnNmb3JtIiwicmVtb3ZlQ2hpbGQiLCJjbGFzc05hbWUiLCJpbnNlcnRCZWZvcmUiLCIkIiwib24iLCJ0b2dnbGVDbGFzcyIsInByZWxvYWRlciIsInBlcmNlbnRzIiwiaW1nUGF0aCIsIm1hcCIsImVsIiwiYmciLCJjc3MiLCJpbWciLCJpcyIsInJlcGxhY2UiLCJhdHRyIiwic2V0UGVyY2VudHMiLCJ0b3RhbCIsImN1cnJlbnQiLCJwZXJzZW50cyIsIk1hdGgiLCJjZWlsIiwidGV4dCIsImZhZGVPdXQiLCJsb2FkSW1hZ2VzIiwiaW1hZ2VzIiwiZm9yRWFjaCIsImZha2VJbWFnZSIsInNyYyIsImluaXQiLCJpbWdzIiwidG9BcnJheSIsImJsb2ciLCJ0aGVuIiwic2Nyb2xsU2lkZWJhciIsInNpZGViYXIiLCJtZW51IiwibGluayIsImFydGljbGUiLCJpc1Bvc2l0aW9uQXJ0aWNsZSIsIm9mZnNldEhlaWdodCIsIm9mZnNldFRvcCIsInBvc2l0aW9uQXJ0aWNsZSIsInRvcCIsImVxIiwib2Zmc2V0IiwiYm90dG9tIiwibWVudUZpeGVkIiwic2Nyb2xsIiwicGFnZVlPZmZzZXQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic2Nyb2xsUGFnZSIsInNpYmxpbmdzIiwiY2xpY2tPbk1lbnUiLCJpbmRleCIsInRhcmdldCIsInNlY3Rpb25PZmZzZXQiLCJvZmYiLCJhbmltYXRlIiwiYWRkTGlzdGVuZXIiLCJzbGlkZXIiLCJvbmxvYWQiLCJTbGlkZXIiLCJkaXNwbGF5IiwiaGVhZGVyIiwiZGVzY3JpcHRpb24iLCJzaXRlTGluayIsImJ0blByZXciLCJidG5OZXh0IiwiYnRuUHJld0ltZyIsImJ0bk5leHRJbWciLCJ3b3JrcyIsImR1cmF0aW9uIiwidGltaW5nIiwidGltZUZyYWN0aW9uIiwiZHJhdyIsInByb2dyZXNzIiwiY29uc29sZSIsImxvZyIsIm9wYWNpdHkiLCJkYXRhIiwiZGF0YUFycmF5IiwicHVzaCIsImNsaWNraW5nIiwiY2F0Y2giLCJzdGF0dXMiLCJlcnJvciIsImluZGV4ZXMiLCJ0b2dnbGVJbmRleGVzIiwiYWRkQW5pbWF0ZSIsInVybCIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInJlc3BvbnNlVHlwZSIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzcG9uc2UiLCJhZGRUZXh0QmxvY2siLCJpbm5lclRleHQiLCJ0aXRsZSIsImRlc2MiLCJocmVmIiwiYWRkRGlzcGxheSIsImltYWdlIiwiYWx0IiwiYWRkTmV4dEltZyIsInByZXZpZXciLCJhZGRQcmV3SW1nIiwiZGlzcGxheUluZGV4IiwicHJld0luZGV4IiwibmV4dEluZGV4IiwiYXJyIiwidHlwZSIsIm1heCIsIm9wdGlvbnMiLCJzdGFydCIsInBlcmZvcm1hbmNlIiwibm93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidGltZSIsImoiLCJrIiwibWFyZ2luVG9wIiwic2V0VGltZW91dCIsImhlaWdodCIsImZvcm1NYWlsIiwicXVlcnlTZWxlY3RvciIsInByZXBhcmVTZW5kTWFpbCIsInByZXZlbnREZWZhdWx0IiwibmFtZSIsInZhbHVlIiwiZW1haWwiLCJwcmVwYXJlU2VuZCIsImZvcm0iLCJjYiIsInJlc3VsdENvbnRhaW5lciIsImlubmVySFRNTCIsInNlbmRBamF4SnNvbiIsInJlc2V0Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxDQUFBLFlBQUE7QUFDQTtBQUNBQTtBQUNBLENBSEE7O0FBS0E7QUFDQSxJQUFBQyxhQUFBLFNBQUFBLFVBQUEsQ0FBQUMsT0FBQSxFQUFBO0FBQ0EsUUFBQSxJQUFBQyxPQUFBLENBQUEsVUFBQUMsT0FBQSxFQUFBO0FBQ0EsTUFBQUYsT0FBQSxFQUFBO0FBQ0FFO0FBQ0E7QUFDQSxFQUpBLENBQUE7QUFLQSxDQU5BOztBQVFBO0FBQ0EsSUFBQUMsV0FBQTtBQUNBQyxVQUFBLG1CQUFBO0FBQUEsU0FBQUMsVUFBQUMsU0FBQSxDQUFBQyxLQUFBLENBQUEsVUFBQSxDQUFBO0FBQUEsRUFEQTtBQUVBQyxhQUFBLHNCQUFBO0FBQUEsU0FBQUgsVUFBQUMsU0FBQSxDQUFBQyxLQUFBLENBQUEsYUFBQSxDQUFBO0FBQUEsRUFGQTtBQUdBRSxNQUFBLGVBQUE7QUFBQSxTQUFBSixVQUFBQyxTQUFBLENBQUFDLEtBQUEsQ0FBQSxtQkFBQSxDQUFBO0FBQUEsRUFIQTtBQUlBRyxRQUFBLGlCQUFBO0FBQUEsU0FBQUwsVUFBQUMsU0FBQSxDQUFBQyxLQUFB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QWhELElBQUE7QUFDQTs7QUFFQSxTQUFBdUQsV0FBQSxDQUFBN0MsR0FBQSxFQUFBOEMsSUFBQSxFQUFBeEQsSUFBQSxFQUFBeUQsRUFBQSxFQUFBO0FBQ0EsS0FBQUMsa0JBQUFGLEtBQUFQLGFBQUEsQ0FBQSxTQUFBLENBQUE7QUFDQVMsaUJBQUFDLFNBQUEsR0FBQSxZQUFBO0FBQ0FDLGNBQUFsRCxHQUFBLEVBQUFWLElBQUEsRUFBQSxVQUFBQSxJQUFBLEVBQUE7QUFDQXdELE9BQUFLLEtBQUE7QUFDQUgsa0JBQUFDLFNBQUEsR0FBQTNELElBQUE7QUFDQSxNQUFBeUQsRUFBQSxFQUFBO0FBQ0FBLE1BQUF6RCxJQUFBO0FBQ0E7QUFDQSxFQU5BO0FBT0EiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcblx0Ly9mb3IgU1ZHLWVsZW1lbnRzIGluIElFXHJcblx0c3ZnNGV2ZXJ5Ym9keSgpOyBcclxufSkoKTtcclxuXHJcbi8v0LfQsNC/0YPRgdGC0LjRgtGMINC60LDQutGD0Y4t0LvQuNCx0L4g0YTRg9C90LrRhtC40Y4sINC10YHQu9C4IGVsZW1lbnQg0YHRg9GJ0LXRgdGC0LLRg9C10YIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbmxldCBmb3JFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XHJcblx0XHRpZihlbGVtZW50KSB7XHJcblx0XHRcdHJlc29sdmUoKTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbi8v0L/RgNC+0LLQtdGA0LrQsCDQvdCwINC80L7QsdC40LvRjNC90L7QtSDRg9GB0YLRgNC+0LnRgdGC0LLQvlxyXG5sZXQgaXNNb2JpbGUgPSB7XHJcbiAgICBBbmRyb2lkOiBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSk7IH0sXHJcbiAgICBCbGFja0JlcnJ5OiBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0JsYWNrQmVycnkvaSk7IH0sXHJcbiAgICBpT1M6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lfGlQYWR8aVBvZC9pKTsgfSxcclxuICAgIE9wZXJhOiBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL09wZXJhIE1pbmkvaSk7IH0sXHJcbiAgICBXaW5kb3dzOiBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0lFTW9iaWxlL2kpOyB9LFxyXG5cclxuICAgIGFueTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIChpc01vYmlsZS5BbmRyb2lkKCkgfHwgaXNNb2JpbGUuQmxhY2tCZXJyeSgpIHx8IGlzTW9iaWxlLmlPUygpIHx8IGlzTW9iaWxlLk9wZXJhKCkgfHwgaXNNb2JpbGUuV2luZG93cygpKTtcclxuICAgIH1cclxufTsiLCIvL0ZsaXAgZWZmZWN0XHJcbihmdW5jdGlvbigpIHtcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICBcdGxldCBhdXRob3JpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF1dGhvcml6ZVwiKSxcclxuXHRcdFx0ZmxpcENsYXNzID0gXCJmbGlwcGVyXCI7XHJcblxyXG5cdFx0Ly9sb2dpbiBmb3JtXHJcblx0XHRpZihhdXRob3JpemUpIHtcclxuXHRcdFx0YXV0aG9yaXplLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBydW5GbGlwKTtcclxuXHJcblx0XHRcdC8v0L/QtdGA0LXQstC10YDQvdGD0YLRjCDQutCw0YDRgtGDINC/0YDQuCDQutC70LjQutC1INCy0L3QtSDQtdC1XHJcblx0XHRcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZighZSkgZSA9IHdpbmRvdy5ldmVudDtcclxuXHRcdFx0XHRsZXQgZWxlbXMgPSBlLnBhdGgsXHJcblx0XHRcdFx0XHRmbGFnID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0Zm9yKGxldCBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZihlbGVtc1tpXS5pZCA9PT0gXCJhdXRob3JpemVcIiB8fCBlbGVtc1tpXS5pZCA9PT0gXCJsb2dpblwiKSB7XHJcblx0XHRcdFx0XHRcdGZsYWcgPSBmYWxzZTtcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYoZmxhZykgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpblwiKS5jbGFzc0xpc3QucmVtb3ZlKGZsaXBDbGFzcyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblxyXG5cdFx0Ly9mbGlwIGVmZmVjdFxyXG5cdFx0ZnVuY3Rpb24gcnVuRmxpcCgpIHtcclxuXHRcdFx0bGV0IGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRhdGFzZXQuZmxpcElkKSxcclxuXHRcdFx0XHRjbGFzc2VzID0gZWxlbS5jbGFzc0xpc3Q7XHJcblxyXG5cdFx0XHRjbGFzc2VzLmNvbnRhaW5zKGZsaXBDbGFzcykgPT09IHRydWUgPyBjbGFzc2VzLnJlbW92ZShmbGlwQ2xhc3MpIDogY2xhc3Nlcy5hZGQoZmxpcENsYXNzKTtcclxuXHRcdH1cclxuXHR9KTtcclxufSkoKTtcclxuIiwiLy9QYXJhbGxheFxyXG4oZnVuY3Rpb24gKCkge1xyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdGxldCBsYXllcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicGFyYWxsYXhfX2xheWVyXCIpLFxyXG5cdFx0XHRwYXJhbGxheCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFyYWxsYXhcIiksXHJcblx0XHRcdHdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwid3JhcHBlclwiKVswXSxcclxuXHRcdFx0bm9QYXJhbGxheCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG5cdFx0bGV0IG1vdmVMYWVycyA9IGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdGUgPSBlIHx8IGV2ZW50O1xyXG5cclxuXHRcdFx0bGV0IGluaXRpYWxYID0gKHdpbmRvdy5pbm5lcldpZHRoIC8gMikgLSBlLnBhZ2VYLFxyXG5cdFx0XHRcdGluaXRpYWxZID0gKHdpbmRvdy5pbm5lckhlaWdodCAvIDIpIC0gZS5wYWdlWTtcclxuXHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0bGV0IGRpdmlkZXI7XHJcblxyXG5cdFx0XHRcdGlmIChsYXllcnMubGVuZ3RoID49IDUpIGRpdmlkZXIgPSBpIC8gMTAwO1xyXG5cdFx0XHRcdGVsc2UgZGl2aWRlciA9IChpICsgMSkgLyAxMDA7XHJcblxyXG5cdFx0XHRcdGxldCBYID0gaW5pdGlhbFggKiBkaXZpZGVyLFxyXG5cdFx0XHRcdFx0WSA9IGluaXRpYWxZICogZGl2aWRlcixcclxuXHRcdFx0XHRcdHRyYW5zZm9ybVN0eWxlID0gXCJ0cmFuc2xhdGUzZChcIiArIFggKyBcInB4LCBcIiArIFkgKyBcInB4LCBcIiArIFwiMClcIjtcclxuXHJcblx0XHRcdFx0bGF5ZXJzW2ldLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVN0eWxlO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGlmKGlzTW9iaWxlLmFueSgpKSB7XHJcblx0XHRcdHdyYXBwZXIucmVtb3ZlQ2hpbGQocGFyYWxsYXgpO1xyXG5cdFx0XHRub1BhcmFsbGF4LmNsYXNzTmFtZSA9IFwicGFyYWxsYXggYmdfZm9yZXN0LWJvdHRvbVwiO1xyXG5cdFx0XHR3cmFwcGVyLmluc2VydEJlZm9yZShub1BhcmFsbGF4LCBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZm9vdGVyXCIpWzBdKTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3ZlTGFlcnMpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59KSgpO1xyXG4iLCIvL01haW4gbWVudVxyXG4vL2pRdWVyeVxyXG4kKGZ1bmN0aW9uKCkge1xyXG5cdCQoJyN0b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcblx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdoYW1idXJnZXJfb24nKTtcclxuXHRcdCQoJyNtYWluLW1lbnUnKS50b2dnbGVDbGFzcygnbWFpbi1tZW51X3RhcmdldCcpO1xyXG5cdH0pO1xyXG59KTtcclxuIiwiLy9QcmVsb2FkZXJcclxuLy9qUXVlcnlcclxubGV0IHByZWxvYWRlciA9IChmdW5jdGlvbiAoKSB7XHJcblx0bGV0IHBlcmNlbnRzID0gMCxcclxuXHRcdHByZWxvYWRlciA9ICQoXCIjcHJlbG9hZGVyXCIpO1xyXG5cclxuXHRsZXQgaW1nUGF0aCA9ICQoXCIqXCIpLm1hcChmdW5jdGlvbiAoaSwgZWwpIHtcclxuXHRcdGxldCBiZyA9ICQoZWwpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiksXHJcblx0XHRcdGltZyA9ICQoZWwpLmlzKFwiaW1nXCIpLFxyXG5cdFx0XHRwYXRoID0gXCJcIjtcclxuXHJcblx0XHRpZiAoYmcgIT0gXCJub25lXCIpIHtcclxuXHRcdFx0cGF0aCA9IGJnLnJlcGxhY2UoJ3VybChcIicsICcnKS5yZXBsYWNlKCdcIiknLCAnJyk7O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChpbWcpIHtcclxuXHRcdFx0cGF0aCA9ICQoZWwpLmF0dHIoXCJzcmNcIik7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHBhdGgpIHJldHVybiBwYXRoO1xyXG5cdH0pO1xyXG5cclxuXHRsZXQgc2V0UGVyY2VudHMgPSBmdW5jdGlvbiAodG90YWwsIGN1cnJlbnQpIHtcclxuXHRcdGxldCBwZXJzZW50cyA9IE1hdGguY2VpbChjdXJyZW50IC8gdG90YWwgKiAxMDApO1xyXG5cclxuXHRcdCQoXCIjcGVyY3JudHNcIikudGV4dChwZXJzZW50cyk7XHJcblxyXG5cdFx0aWYgKHBlcnNlbnRzID49IDEwMCkge1xyXG5cdFx0XHRwcmVsb2FkZXIuZmFkZU91dCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0bGV0IGxvYWRJbWFnZXMgPSBmdW5jdGlvbiAoaW1hZ2VzKSB7XHJcblxyXG5cdFx0aWYgKCFpbWFnZXMubGVuZ3RoKSBwcmVsb2FkZXIuZmFkZU91dCgpO1xyXG5cclxuXHRcdGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbWcsIGksIGltYWdlcykge1xyXG5cdFx0XHRsZXQgZmFrZUltYWdlID0gJChcIjxpbWc+XCIsIHtcclxuXHRcdFx0XHRhdHRyOiB7XHJcblx0XHRcdFx0XHRzcmM6IGltZ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRmYWtlSW1hZ2Uub24oXCJsb2FkIGVycm9yXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRwZXJjZW50cysrO1xyXG5cdFx0XHRcdHNldFBlcmNlbnRzKGltYWdlcy5sZW5ndGgsIHBlcmNlbnRzKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGxldCBpbWdzID0gaW1nUGF0aC50b0FycmF5KCk7XHJcblxyXG5cdFx0XHRsb2FkSW1hZ2VzKGltZ3MpO1xyXG5cdFx0fVxyXG5cdH1cclxufSgpKTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuXHRwcmVsb2FkZXIuaW5pdCgpO1xyXG59KTtcclxuIiwiLy9TaWRlYmFyXHJcbi8valF1ZXJ5XHJcbmxldCBibG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJibG9nXCIpO1xyXG5cclxuLy/QtdGB0LvQuCDRjdC70LXQvNC10L3RgiBibG9nINGB0YPRidC10YHRgtCy0YPQtdGCXHJcbmZvckVsZW1lbnQoYmxvZykudGhlbihmdW5jdGlvbiAoKSB7XHJcblx0Ly/QvNC+0LTRg9C70YwgU2lkZWJhclxyXG5cdGxldCBzY3JvbGxTaWRlYmFyID0gKGZ1bmN0aW9uICgpIHtcclxuXHRcdGxldCBzaWRlYmFyID0gJChcIi5zaWRlYmFyXCIpLFxyXG5cdFx0XHRtZW51ID0gJChcIi5zaWRlYmFyLW5hdlwiKSxcclxuXHRcdFx0bGluayA9ICQoXCIuc2lkZWJhcl9fbGlua1wiKSxcclxuXHRcdFx0YXJ0aWNsZSA9ICQoXCIuYXJ0aWNsZVwiKSxcclxuXHRcdFx0Ym9keSA9IGRvY3VtZW50LmJvZHksXHJcblx0XHRcdGlzUG9zaXRpb25BcnRpY2xlID0gW10sXHJcblx0XHRcdG9mZnNldEhlaWdodCA9ICQoXCIuYmxvZ19fY29udGVudFwiKVswXS5vZmZzZXRUb3AgLSAkKFwiLm1haW5cIilbMF0ub2Zmc2V0VG9wO1xyXG5cclxuXHRcdGxldCBwb3NpdGlvbkFydGljbGUgPSBmdW5jdGlvbiAoZWwpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBlbC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlzUG9zaXRpb25BcnRpY2xlW2ldID0ge307XHJcblx0XHRcdFx0aXNQb3NpdGlvbkFydGljbGVbaV0udG9wID0gZWxcclxuXHRcdFx0XHRcdC5lcShpKVxyXG5cdFx0XHRcdFx0Lm9mZnNldCgpXHJcblx0XHRcdFx0XHQudG9wIC0gb2Zmc2V0SGVpZ2h0O1xyXG5cdFx0XHRcdGlzUG9zaXRpb25BcnRpY2xlW2ldLmJvdHRvbSA9IGlzUG9zaXRpb25BcnRpY2xlW2ldLnRvcCArIGVsXHJcblx0XHRcdFx0XHQuZXEoaSlcclxuXHRcdFx0XHRcdC5pbm5lckhlaWdodCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGxldCBtZW51Rml4ZWQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGxldCBzY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcblxyXG5cdFx0XHRpZiAoc2Nyb2xsIDwgYXJ0aWNsZS5vZmZzZXQoKS50b3ApIHtcclxuXHRcdFx0XHRzaWRlYmFyLnJlbW92ZUNsYXNzKFwiZml4ZWRcIik7XHJcblx0XHRcdFx0JChcIi5ibG9nX19jb250ZW50XCIpLnJlbW92ZUNsYXNzKFwibmF2LWZpeGVkXCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHNpZGViYXIuYWRkQ2xhc3MoXCJmaXhlZFwiKTtcclxuXHRcdFx0XHQkKFwiLmJsb2dfX2NvbnRlbnRcIikuYWRkQ2xhc3MoXCJuYXYtZml4ZWRcIik7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0bGV0IHNjcm9sbFBhZ2UgPSBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRsZXQgc2Nyb2xsID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG5cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBpc1Bvc2l0aW9uQXJ0aWNsZS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmIChzY3JvbGwgPj0gaXNQb3NpdGlvbkFydGljbGVbaV0udG9wICYmIHNjcm9sbCA8PSBpc1Bvc2l0aW9uQXJ0aWNsZVtpXS5ib3R0b20pIHtcclxuXHRcdFx0XHRcdGxpbmtcclxuXHRcdFx0XHRcdFx0LmVxKGkpXHJcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyhcInNpZGViYXJfX2xpbmtfYWN0aXZlXCIpXHJcblx0XHRcdFx0XHRcdC5zaWJsaW5ncygpXHJcblx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhcInNpZGViYXJfX2xpbmtfYWN0aXZlXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRsZXQgY2xpY2tPbk1lbnUgPSBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRsZXQgaW5kZXggPSAkKGUudGFyZ2V0KS5pbmRleCgpO1xyXG5cdFx0XHRsZXQgc2VjdGlvbk9mZnNldCA9IGFydGljbGVcclxuXHRcdFx0XHQuZXEoaW5kZXgpXHJcblx0XHRcdFx0Lm9mZnNldCgpXHJcblx0XHRcdFx0LnRvcDtcclxuXHRcdFx0JChkb2N1bWVudCkub2ZmKFwic2Nyb2xsXCIsIHNjcm9sbFBhZ2UpO1xyXG5cdFx0XHQkKFwiYm9keSwgaHRtbFwiKS5hbmltYXRlKHtcclxuXHRcdFx0XHRcInNjcm9sbFRvcFwiOiBzZWN0aW9uT2Zmc2V0XHJcblx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQkKGUudGFyZ2V0KVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKFwic2lkZWJhcl9fbGlua19hY3RpdmVcIilcclxuXHRcdFx0XHRcdC5zaWJsaW5ncygpXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoXCJzaWRlYmFyX19saW5rX2FjdGl2ZVwiKTtcclxuXHRcdFx0XHQkKGRvY3VtZW50KS5vbihcInNjcm9sbFwiLCBzY3JvbGxQYWdlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGxldCBhZGRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JChtZW51KS5vbihcImNsaWNrXCIsIGNsaWNrT25NZW51KTtcclxuXHJcblx0XHRcdCQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIHNjcm9sbFBhZ2UpO1xyXG5cdFx0XHQkKGRvY3VtZW50KS5vbihcInNjcm9sbFwiLCBtZW51Rml4ZWQpO1xyXG5cclxuXHRcdFx0JCh3aW5kb3cpLm9uKFwibG9hZFwiLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdHBvc2l0aW9uQXJ0aWNsZShhcnRpY2xlKTtcclxuXHRcdFx0fSlcclxuXHJcblx0XHRcdCQod2luZG93KS5vbihcInJlc2l6ZVwiLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdHBvc2l0aW9uQXJ0aWNsZShhcnRpY2xlKTtcclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpbml0OiBhZGRMaXN0ZW5lclxyXG5cdFx0fVxyXG5cdH0pKCk7XHJcblxyXG5cdHNjcm9sbFNpZGViYXIuaW5pdCgpO1xyXG5cclxuXHQvL3RvZ2dsZSBjbGFzcyBcclxuXHQkKFwiI2J0blwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoXCIjYmxvZ1wiKS50b2dnbGVDbGFzcyhcIm9uXCIpO1xyXG5cdH0pO1xyXG59KTtcdFxyXG4iLCIvL1NsaWRlclxyXG5sZXQgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGlkZXJcIik7XHJcblxyXG5mb3JFbGVtZW50KHNsaWRlcikudGhlbihmdW5jdGlvbigpIHtcclxuXHR3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRTbGlkZXIuaW5pdCgpO1xyXG5cdH07XHJcblxyXG5cdGxldCBTbGlkZXIgPSB7XHJcblx0XHRpbml0KCkge1xyXG5cdFx0XHR0aGlzLmRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpc3BsYXlcIik7XHJcblx0XHRcdHRoaXMuaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXJcIik7XHJcblx0XHRcdHRoaXMuZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpO1xyXG5cdFx0XHR0aGlzLnNpdGVMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaXRlTGlua1wiKTtcclxuXHRcdFx0dGhpcy5idG5QcmV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5QcmV3XCIpO1xyXG5cdFx0XHR0aGlzLmJ0bk5leHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0bk5leHRcIik7XHJcblx0XHRcdHRoaXMuYnRuUHJld0ltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuUHJld0ltZ1wiKTtcclxuXHRcdFx0dGhpcy5idG5OZXh0SW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5OZXh0SW1nXCIpO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy53b3JrcyA9IFtdO1xyXG5cclxuXHRcdFx0dGhpcy5kdXJhdGlvbiA9IDEwMDA7XHJcblxyXG5cdFx0XHR0aGlzLmRpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFNsaWRlci5hbmltYXRlKHtcclxuXHRcdFx0XHRcdGR1cmF0aW9uOiAzMDAwLFxyXG5cdFx0XHRcdFx0dGltaW5nOiBmdW5jdGlvbih0aW1lRnJhY3Rpb24pIHsgcmV0dXJuIHRpbWVGcmFjdGlvbjsgfSxcclxuXHRcdFx0XHRcdGRyYXc6IGZ1bmN0aW9uKHByb2dyZXNzKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHByb2dyZXNzKTtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmRpc3BsYXkuc3R5bGUub3BhY2l0eSA9IHByb2dyZXNzO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vQWpheFxyXG5cdFx0XHR0aGlzLmRhdGEoXCIvYXNzZXRzL2pzb24vc2xpZGVyLmpzb25cIilcclxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihkYXRhQXJyYXkpIHtcclxuXHRcdFx0XHRcdGZvcihsZXQgaSA9IDA7IGkgPCBkYXRhQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLndvcmtzLnB1c2goZGF0YUFycmF5W2ldKTtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLndvcmtzW2ldLmluZGV4ID0gaTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8v0LfQsNC/0L7Qu9C90LjRgtGMINGB0LvQsNC50LTQtdGAINC/0LXRgNCy0L7QvdCw0YfQsNC70YzQvdGL0LzQuCDQtNCw0L3QvdGL0LzQuFxyXG5cdFx0XHRcdFx0U2xpZGVyLmNsaWNraW5nKDAsIChkYXRhQXJyYXkubGVuZ3RoIC0gMSksIDEpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHN0YXR1cykge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcItCa0L7QtCDQvtGC0LLQtdGC0LA6IFwiLCBzdGF0dXMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHJcblx0XHRcdC8vRXZlbnRzXHJcblx0XHRcdHRoaXMuYnRuUHJldy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRsZXQgaW5kZXhlcyA9IFtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmRpc3BsYXkuZGF0YXNldC5pbmRleCwgXHJcblx0XHRcdFx0XHRcdFNsaWRlci5idG5QcmV3SW1nLmRhdGFzZXQuaW5kZXgsIFxyXG5cdFx0XHRcdFx0XHRTbGlkZXIuYnRuTmV4dEltZy5kYXRhc2V0LmluZGV4XHJcblx0XHRcdFx0XHRdO1xyXG5cclxuXHRcdFx0XHRTbGlkZXIudG9nZ2xlSW5kZXhlcyhpbmRleGVzLCBcIm1pbnVzXCIpO1xyXG5cdFx0XHRcdFNsaWRlci5hZGRBbmltYXRlKGluZGV4ZXNbMF0sIGluZGV4ZXNbMV0sIGluZGV4ZXNbMl0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuYnRuTmV4dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0bGV0IGluZGV4ZXMgPSBbXHJcblx0XHRcdFx0XHRcdFNsaWRlci5kaXNwbGF5LmRhdGFzZXQuaW5kZXgsIFxyXG5cdFx0XHRcdFx0XHRTbGlkZXIuYnRuUHJld0ltZy5kYXRhc2V0LmluZGV4LCBcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmJ0bk5leHRJbWcuZGF0YXNldC5pbmRleFxyXG5cdFx0XHRcdFx0XTtcclxuXHJcblx0XHRcdFx0U2xpZGVyLnRvZ2dsZUluZGV4ZXMoaW5kZXhlcywgXCJwbHVzXCIpO1xyXG5cdFx0XHRcdFNsaWRlci5hZGRBbmltYXRlKGluZGV4ZXNbMF0sIGluZGV4ZXNbMV0sIGluZGV4ZXNbMl0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdGRhdGEodXJsKSB7XHJcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuXHRcdFx0XHRsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblx0XHRcdFx0eGhyLm9wZW4oXCJHRVRcIiwgdXJsLCB0cnVlKTtcclxuXHRcdFx0XHR4aHIucmVzcG9uc2VUeXBlID0gXCJqc29uXCI7XHJcblx0XHRcdFx0eGhyLnNlbmQoKTtcclxuXHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRpZih4aHIucmVhZHlTdGF0ZSAhPT0gNCkgcmV0dXJuO1xyXG5cdFx0XHRcdFx0aWYoeGhyLnN0YXR1cyAhPT0gMjAwKSB7XHJcblx0XHRcdFx0XHRcdHJlamVjdCh4aHIuc3RhdHVzKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHJlc29sdmUoeGhyLnJlc3BvbnNlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0YWRkVGV4dEJsb2NrKGluZGV4KSB7XHJcblx0XHRcdHRoaXMuaGVhZGVyLmlubmVyVGV4dCA9IHRoaXMud29ya3NbaW5kZXhdLnRpdGxlO1xyXG5cdFx0XHR0aGlzLmRlc2NyaXB0aW9uLmlubmVyVGV4dCA9IHRoaXMud29ya3NbaW5kZXhdLmRlc2M7XHJcblx0XHRcdHRoaXMuc2l0ZUxpbmsuaHJlZiA9IHRoaXMud29ya3NbaW5kZXhdLmxpbms7XHJcblx0XHR9LFxyXG5cclxuXHRcdGFkZERpc3BsYXkoaW5kZXgpIHtcclxuXHRcdFx0dGhpcy5kaXNwbGF5LnNyYyA9IHRoaXMud29ya3NbaW5kZXhdLmltYWdlO1xyXG5cdFx0XHR0aGlzLmRpc3BsYXkuYWx0ID0gdGhpcy53b3Jrc1tpbmRleF0udGl0bGU7XHJcblx0XHRcdHRoaXMuZGlzcGxheS5kYXRhc2V0LmluZGV4ID0gaW5kZXg7XHJcblx0XHR9LFxyXG5cclxuXHRcdGFkZE5leHRJbWcoaW5kZXgpIHtcclxuXHRcdFx0dGhpcy5idG5OZXh0SW1nLnNyYyA9IHRoaXMud29ya3NbaW5kZXhdLnByZXZpZXc7XHJcblx0XHRcdHRoaXMuYnRuTmV4dEltZy5hbHQgPSB0aGlzLndvcmtzW2luZGV4XS50aXRsZTtcclxuXHRcdFx0dGhpcy5idG5OZXh0SW1nLmRhdGFzZXQuaW5kZXggPSBpbmRleDtcclxuXHRcdH0sXHJcblxyXG5cdFx0YWRkUHJld0ltZyhpbmRleCkge1xyXG5cdFx0XHR0aGlzLmJ0blByZXdJbWcuc3JjID0gdGhpcy53b3Jrc1tpbmRleF0ucHJldmlldztcclxuXHRcdFx0dGhpcy5idG5QcmV3SW1nLmFsdCA9IHRoaXMud29ya3NbaW5kZXhdLnRpdGxlO1xyXG5cdFx0XHR0aGlzLmJ0blByZXdJbWcuZGF0YXNldC5pbmRleCA9IGluZGV4O1xyXG5cdFx0fSxcclxuXHJcblx0XHRjbGlja2luZyhkaXNwbGF5SW5kZXgsIHByZXdJbmRleCwgbmV4dEluZGV4KSB7XHJcblx0XHRcdC8vbWFpbiBjb250ZW50IGluIHRoZSBzbGlkZXI6IGJpZyBwaWN0dXJlLCB0aXRsZSwgZGVzY3JpcHRpb24gYW5kIGxpbmtcclxuXHRcdFx0dGhpcy5hZGREaXNwbGF5KGRpc3BsYXlJbmRleCk7XHJcblx0XHRcdHRoaXMuYWRkVGV4dEJsb2NrKGRpc3BsYXlJbmRleCk7XHJcblx0XHRcdC8vc21hbGwgaW1hZ2Ugb24gdGhlIGJ1dHRvbiBcInByZXZpb3VzIHdvcmtcIlxyXG5cdFx0XHR0aGlzLmFkZFByZXdJbWcocHJld0luZGV4KTtcclxuXHRcdFx0Ly9zbWFsbCBpbWFnZSBvbiB0aGUgYnV0dG9uIFwibmV4dCB3b3JrXCJcclxuXHRcdFx0dGhpcy5hZGROZXh0SW1nKG5leHRJbmRleCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRvZ2dsZUluZGV4ZXMoYXJyLCB0eXBlKSB7XHJcblx0XHRcdGxldCBtYXggPSB0aGlzLndvcmtzLmxlbmd0aCAtIDE7XHJcblxyXG5cdFx0XHRmb3IobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0c3dpdGNoKHR5cGUpIHtcclxuXHRcdFx0XHRcdGNhc2UgXCJwbHVzXCIgOlxyXG5cdFx0XHRcdFx0XHRpZihhcnJbaV0gPT0gbWF4KSBhcnJbaV0gPSAwO1xyXG5cdFx0XHRcdFx0XHRlbHNlIGFycltpXSsrO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgXCJtaW51c1wiIDpcclxuXHRcdFx0XHRcdFx0aWYoYXJyW2ldID09IDApIGFycltpXSA9IG1heDtcclxuXHRcdFx0XHRcdFx0ZWxzZSBhcnJbaV0tLTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHRhbmltYXRlKG9wdGlvbnMpIHtcclxuXHRcdFx0bGV0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG5cdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gYW5pbWF0ZSh0aW1lKSB7XHJcblx0XHRcdFx0Ly8gdGltZUZyYWN0aW9uINC+0YIgMCDQtNC+IDFcclxuXHRcdFx0XHRsZXQgdGltZUZyYWN0aW9uID0gKHRpbWUgLSBzdGFydCkgLyBvcHRpb25zLmR1cmF0aW9uO1xyXG5cdFx0XHRcdGlmICh0aW1lRnJhY3Rpb24gPiAxKSB0aW1lRnJhY3Rpb24gPSAxO1xyXG5cclxuXHRcdFx0XHQvLyDRgtC10LrRg9GJ0LXQtSDRgdC+0YHRgtC+0Y/QvdC40LUg0LDQvdC40LzQsNGG0LjQuFxyXG5cdFx0XHRcdGxldCBwcm9ncmVzcyA9IHRpbWVGcmFjdGlvbjtcclxuXHRcdFx0XHQvL9GE0YPQvdC60YbQuNGPLCDQvtC/0LjRgdGL0LLQsNGO0YnQsNGPINCw0L3QuNC80LDRhtC40Y5cclxuXHRcdFx0XHRvcHRpb25zLmRyYXcocHJvZ3Jlc3MpO1xyXG5cclxuXHRcdFx0XHRpZiAodGltZUZyYWN0aW9uIDwgMSkge1xyXG5cdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGFkZEFuaW1hdGUoaSwgaiwgaykge1xyXG5cdFx0XHQvL9Cw0L3QuNC80LDRhtC40Y8g0LTQviDQv9C10YDQtdC60LvRjtGH0LXQvdC40Y8g0YHQu9Cw0LnQtNCwXHJcblx0XHRcdFNsaWRlci5hbmltYXRlKHtcclxuXHRcdFx0XHRkdXJhdGlvbjogU2xpZGVyLmR1cmF0aW9uLFxyXG5cdFx0XHRcdGRyYXc6IGZ1bmN0aW9uIChwcm9ncmVzcykge1xyXG5cdFx0XHRcdFx0U2xpZGVyLmJ0blByZXdJbWcuc3R5bGUubWFyZ2luVG9wID0gcHJvZ3Jlc3MgKiA2MDAgKyBcInB4XCI7XHJcblx0XHRcdFx0XHRTbGlkZXIuYnRuTmV4dEltZy5zdHlsZS5tYXJnaW5Ub3AgPSBwcm9ncmVzcyAqIC02MDAgKyBcInB4XCI7XHJcblx0XHRcdFx0XHRTbGlkZXIuZGlzcGxheS5zdHlsZS5vcGFjaXR5ID0gMSAtIHByb2dyZXNzO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRTbGlkZXIuY2xpY2tpbmcoaSwgaiwgayk7XHJcblxyXG5cdFx0XHRcdFNsaWRlci5idG5QcmV3SW1nLnN0eWxlLm1hcmdpblRvcCA9IDAgKyBcInB4XCI7XHJcblx0XHRcdFx0U2xpZGVyLmJ0blByZXdJbWcuc3R5bGUuaGVpZ2h0ID0gMCArIFwiJVwiO1xyXG5cdFx0XHRcdFNsaWRlci5idG5OZXh0SW1nLnN0eWxlLm1hcmdpblRvcCA9IDAgKyBcInB4XCI7XHJcblx0XHRcdFx0U2xpZGVyLmJ0bk5leHRJbWcuc3R5bGUuaGVpZ2h0ID0gMCArIFwiJVwiO1xyXG5cclxuXHRcdFx0XHQvL9Cw0L3QuNC80LDRhtC40Y8g0L/QvtGB0LvQtSDQv9C10YDQtdC60LvRjtGH0LXQvdC40Y8g0YHQu9Cw0LnQtNCwXHJcblx0XHRcdFx0U2xpZGVyLmFuaW1hdGUoe1xyXG5cdFx0XHRcdFx0ZHVyYXRpb246IFNsaWRlci5kdXJhdGlvbixcclxuXHRcdFx0XHRcdGRyYXc6IGZ1bmN0aW9uIChwcm9ncmVzcykge1xyXG5cdFx0XHRcdFx0XHRTbGlkZXIuYnRuUHJld0ltZy5zdHlsZS5oZWlnaHQgPSBwcm9ncmVzcyAqIDEwMCArIFwiJVwiO1xyXG5cdFx0XHRcdFx0XHRTbGlkZXIuYnRuTmV4dEltZy5zdHlsZS5oZWlnaHQgPSBwcm9ncmVzcyAqIDEwMCArIFwiJVwiO1xyXG5cdFx0XHRcdFx0XHRTbGlkZXIuZGlzcGxheS5zdHlsZS5vcGFjaXR5ID0gcHJvZ3Jlc3M7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0sIChTbGlkZXIuZHVyYXRpb24gKyAxMDApKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG4iLCIvL1NlbmQgbWFpbFxyXG5cclxuY29uc3QgZm9ybU1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFpbCcpO1xyXG5cclxuaWYgKGZvcm1NYWlsKSB7XHJcbiAgZm9ybU1haWwuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgcHJlcGFyZVNlbmRNYWlsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcHJlcGFyZVNlbmRNYWlsKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgbGV0IGRhdGEgPSB7XHJcbiAgICBuYW1lOiBmb3JtTWFpbC5uYW1lLnZhbHVlLFxyXG4gICAgZW1haWw6IGZvcm1NYWlsLmVtYWlsLnZhbHVlLFxyXG4gICAgdGV4dDogZm9ybU1haWwudGV4dC52YWx1ZVxyXG4gIH07XHJcbiAgcHJlcGFyZVNlbmQoJy93b3JrcycsIGZvcm1NYWlsLCBkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcHJlcGFyZVNlbmQodXJsLCBmb3JtLCBkYXRhLCBjYikge1xyXG4gIGxldCByZXN1bHRDb250YWluZXIgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zdGF0dXMnKTtcclxuICByZXN1bHRDb250YWluZXIuaW5uZXJIVE1MID0gJ1NlbmRpbmcuLi4nO1xyXG4gIHNlbmRBamF4SnNvbih1cmwsIGRhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICBmb3JtLnJlc2V0KCk7XHJcbiAgICByZXN1bHRDb250YWluZXIuaW5uZXJIVE1MID0gZGF0YTtcclxuICAgIGlmIChjYikge1xyXG4gICAgICBjYihkYXRhKTtcclxuICAgIH1cclxuICB9KTtcclxufSJdfQ==
