"use strict";

(function () {
	//for SVG-elements in IE
	svg4everybody();
})();

//запустить какую-либо функцию, если element существует на странице
var forElement = function forElement(element) {
	return new Promise(function (resolve) {
		if (element) {
			resolve();
		}
	});
};

//проверка на мобильное устройство
var isMobile = {
	Android: function Android() {
		return navigator.userAgent.match(/Android/i);
	},
	BlackBerry: function BlackBerry() {
		return navigator.userAgent.match(/BlackBerry/i);
	},
	iOS: function iOS() {
		return navigator.userAgent.match(/iPhone|iPad|iPod/i);
	},
	Opera: function Opera() {
		return navigator.userAgent.match(/Opera Mini/i);
	},
	Windows: function Windows() {
		return navigator.userAgent.match(/IEMobile/i);
	},

	any: function any() {
		return isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows();
	}
};
//Flip effect
(function () {
	document.addEventListener("DOMContentLoaded", function () {

		var authorize = document.getElementById("authorize"),
		    flipClass = "flipper";

		//login form
		if (authorize) {
			authorize.addEventListener("click", runFlip);

			//перевернуть карту при клике вне ее
			document.body.addEventListener("click", function (e) {
				if (!e) e = window.event;
				var elems = e.path,
				    flag = true;

				for (var i = 0; i < elems.length; i++) {
					if (elems[i].id === "authorize" || elems[i].id === "login") {
						flag = false;
					}
				}

				if (flag) document.getElementById("login").classList.remove(flipClass);
			});
		}

		//flip effect
		function runFlip() {
			var elem = document.getElementById(this.dataset.flipId),
			    classes = elem.classList;

			classes.contains(flipClass) === true ? classes.remove(flipClass) : classes.add(flipClass);
		}
	});
})();

//Parallax
(function () {
	document.addEventListener("DOMContentLoaded", function () {
		var layers = document.getElementsByClassName("parallax__layer"),
		    parallax = document.getElementById("parallax"),
		    wrapper = document.getElementsByClassName("wrapper")[0],
		    noParallax = document.createElement("div");

		var moveLaers = function moveLaers(e) {
			e = e || event;

			var initialX = window.innerWidth / 2 - e.pageX,
			    initialY = window.innerHeight / 2 - e.pageY;

			for (var i = 0; i < layers.length; i++) {
				var divider = void 0;

				if (layers.length >= 5) divider = i / 100;else divider = (i + 1) / 100;

				var X = initialX * divider,
				    Y = initialY * divider,
				    transformStyle = "translate3d(" + X + "px, " + Y + "px, " + "0)";

				layers[i].style.transform = transformStyle;
			}
		};

		if (isMobile.any()) {
			wrapper.removeChild(parallax);
			noParallax.className = "parallax bg_forest-bottom";
			wrapper.insertBefore(noParallax, document.getElementsByClassName("footer")[0]);
		} else {
			window.addEventListener("mousemove", moveLaers);
		}
	});
})();

//Main menu
//jQuery
$(function () {
	$('#toggle').on('click', function () {
		$(this).toggleClass('hamburger_on');
		$('#main-menu').toggleClass('main-menu_target');
	});
});

//Preloader
//jQuery
var preloader = function () {
	var percents = 0,
	    preloader = $("#preloader");

	var imgPath = $("*").map(function (i, el) {
		var bg = $(el).css("background-image"),
		    img = $(el).is("img"),
		    path = "";

		if (bg != "none") {
			path = bg.replace('url("', '').replace('")', '');;
		}

		if (img) {
			path = $(el).attr("src");
		}

		if (path) return path;
	});

	var setPercents = function setPercents(total, current) {
		var persents = Math.ceil(current / total * 100);

		$("#percrnts").text(persents);

		if (persents >= 100) {
			preloader.fadeOut();
		}
	};

	var loadImages = function loadImages(images) {

		if (!images.length) preloader.fadeOut();

		images.forEach(function (img, i, images) {
			var fakeImage = $("<img>", {
				attr: {
					src: img
				}
			});

			fakeImage.on("load error", function () {
				percents++;
				setPercents(images.length, percents);
			});
		});
	};

	return {
		init: function init() {
			var imgs = imgPath.toArray();

			loadImages(imgs);
		}
	};
}();

$(function () {
	preloader.init();
});

//Sidebar
//jQuery
var blog = document.getElementById("blog");

//если элемент blog существует
forElement(blog).then(function () {
	//модуль Sidebar
	var scrollSidebar = function () {
		var sidebar = $(".sidebar"),
		    menu = $(".sidebar-nav"),
		    link = $(".sidebar__link"),
		    article = $(".article"),
		    body = document.body,
		    isPositionArticle = [],
		    offsetHeight = $(".blog__content")[0].offsetTop - $(".main")[0].offsetTop;

		var positionArticle = function positionArticle(el) {
			for (var i = 0; i < el.length; i++) {
				isPositionArticle[i] = {};
				isPositionArticle[i].top = el.eq(i).offset().top - offsetHeight;
				isPositionArticle[i].bottom = isPositionArticle[i].top + el.eq(i).innerHeight();
			}
		};

		var menuFixed = function menuFixed() {
			var scroll = window.pageYOffset;

			if (scroll < article.offset().top) {
				sidebar.removeClass("fixed");
				$(".blog__content").removeClass("nav-fixed");
			} else {
				sidebar.addClass("fixed");
				$(".blog__content").addClass("nav-fixed");
			}
		};

		var scrollPage = function scrollPage(e) {
			var scroll = window.pageYOffset;

			for (var i = 0; i < isPositionArticle.length; i++) {
				if (scroll >= isPositionArticle[i].top && scroll <= isPositionArticle[i].bottom) {
					link.eq(i).addClass("sidebar__link_active").siblings().removeClass("sidebar__link_active");
				}
			}
		};

		var clickOnMenu = function clickOnMenu(e) {
			var index = $(e.target).index();
			var sectionOffset = article.eq(index).offset().top;
			$(document).off("scroll", scrollPage);
			$("body, html").animate({
				"scrollTop": sectionOffset
			}, function () {
				$(e.target).addClass("sidebar__link_active").siblings().removeClass("sidebar__link_active");
				$(document).on("scroll", scrollPage);
			});
		};

		var addListener = function addListener() {
			$(menu).on("click", clickOnMenu);

			$(document).on("scroll", scrollPage);
			$(document).on("scroll", menuFixed);

			$(window).on("load", function (e) {
				positionArticle(article);
			});

			$(window).on("resize", function (e) {
				positionArticle(article);
			});
		};

		return {
			init: addListener
		};
	}();

	scrollSidebar.init();

	//toggle class 
	$("#btn").on("click", function () {
		$("#blog").toggleClass("on");
	});
});

//Slider
var slider = document.getElementById("slider");

forElement(slider).then(function () {
	window.onload = function () {
		Slider.init();
	};

	var Slider = {
		init: function init() {
			this.display = document.getElementById("display");
			this.header = document.getElementById("header");
			this.description = document.getElementById("description");
			this.siteLink = document.getElementById("siteLink");
			this.btnPrew = document.getElementById("btnPrew");
			this.btnNext = document.getElementById("btnNext");
			this.btnPrewImg = document.getElementById("btnPrewImg");
			this.btnNextImg = document.getElementById("btnNextImg");

			this.works = [];

			this.addData();

			//заполнить слайдер первоначальными данными
			Slider.clicking(0, this.works.length - 1, 1);

			this.duration = 1000;

			this.display.addEventListener("click", function () {
				Slider.animate({
					duration: 3000,
					timing: function timing(timeFraction) {
						return timeFraction;
					},
					draw: function draw(progress) {
						console.log(progress);
						Slider.display.style.opacity = progress;
					}
				});
			});

			//Ajax
			/*this.data("/assets/json/slider.json")
   	.then(function(dataArray) {
   		for(let i = 0; i < dataArray.length; i++) {
   			Slider.works.push(dataArray[i]);
   			Slider.works[i].index = i;
   		}
   		//заполнить слайдер первоначальными данными
   		Slider.clicking(0, (dataArray.length - 1), 1);
   	})
   	.catch(function(status) {
   		console.error("Код ответа: ", status);
   	});*/

			//Events
			this.btnPrew.addEventListener("click", function (event) {
				var indexes = [Slider.display.dataset.index, Slider.btnPrewImg.dataset.index, Slider.btnNextImg.dataset.index];

				Slider.toggleIndexes(indexes, "minus");
				Slider.addAnimate(indexes[0], indexes[1], indexes[2]);
			});

			this.btnNext.addEventListener("click", function () {
				var indexes = [Slider.display.dataset.index, Slider.btnPrewImg.dataset.index, Slider.btnNextImg.dataset.index];

				Slider.toggleIndexes(indexes, "plus");
				Slider.addAnimate(indexes[0], indexes[1], indexes[2]);
			});
		},
		addData: function addData() {
			var dataList = slider.querySelector(".slider__data");

			for (var i = 0; i < dataList.children.length; i++) {
				var li = {
					title: dataList.children[i].dataset.name,
					desc: dataList.children[i].dataset.tech,
					image: dataList.children[i].dataset.url,
					preview: dataList.children[i].dataset.url,
					link: dataList.children[i].dataset.link,
					index: i
				};
				Slider.works.push(li);
			}
		},


		/*data(url) {
  	return new Promise(function(resolve, reject) {
  		let xhr = new XMLHttpRequest();
  		xhr.open("GET", url, true);
  		xhr.responseType = "json";
  		xhr.send();
  		xhr.onreadystatechange = function() {
  			if(xhr.readyState !== 4) return;
  			if(xhr.status !== 200) {
  				reject(xhr.status);
  			} else {
  				resolve(xhr.response);
  			}
  		};
  	});
  },*/

		addTextBlock: function addTextBlock(index) {
			this.header.innerText = this.works[index].title;
			this.description.innerText = this.works[index].desc;
			this.siteLink.href = this.works[index].link;
		},
		addDisplay: function addDisplay(index) {
			this.display.src = this.works[index].image;
			this.display.alt = this.works[index].title;
			this.display.dataset.index = index;
		},
		addNextImg: function addNextImg(index) {
			this.btnNextImg.src = this.works[index].preview;
			this.btnNextImg.alt = this.works[index].title;
			this.btnNextImg.dataset.index = index;
		},
		addPrewImg: function addPrewImg(index) {
			this.btnPrewImg.src = this.works[index].preview;
			this.btnPrewImg.alt = this.works[index].title;
			this.btnPrewImg.dataset.index = index;
		},
		clicking: function clicking(displayIndex, prewIndex, nextIndex) {
			//main content in the slider: big picture, title, description and link
			this.addDisplay(displayIndex);
			this.addTextBlock(displayIndex);
			//small image on the button "previous work"
			this.addPrewImg(prewIndex);
			//small image on the button "next work"
			this.addNextImg(nextIndex);
		},
		toggleIndexes: function toggleIndexes(arr, type) {
			var max = this.works.length - 1;

			for (var i = 0; i < arr.length; i++) {
				switch (type) {
					case "plus":
						if (arr[i] == max) arr[i] = 0;else arr[i]++;
						break;
					case "minus":
						if (arr[i] == 0) arr[i] = max;else arr[i]--;
						break;
				}
			}
		},
		animate: function animate(options) {
			var start = performance.now();

			requestAnimationFrame(function animate(time) {
				// timeFraction от 0 до 1
				var timeFraction = (time - start) / options.duration;
				if (timeFraction > 1) timeFraction = 1;

				// текущее состояние анимации
				var progress = timeFraction;
				//функция, описывающая анимацию
				options.draw(progress);

				if (timeFraction < 1) {
					requestAnimationFrame(animate);
				}
			});
		},
		addAnimate: function addAnimate(i, j, k) {
			//анимация до переключения слайда
			Slider.animate({
				duration: Slider.duration,
				draw: function draw(progress) {
					Slider.btnPrewImg.style.marginTop = progress * 600 + "px";
					Slider.btnNextImg.style.marginTop = progress * -600 + "px";
					Slider.display.style.opacity = 1 - progress;
				}
			});

			setTimeout(function () {
				Slider.clicking(i, j, k);

				Slider.btnPrewImg.style.marginTop = 0 + "px";
				Slider.btnPrewImg.style.height = 0 + "%";
				Slider.btnNextImg.style.marginTop = 0 + "px";
				Slider.btnNextImg.style.height = 0 + "%";

				//анимация после переключения слайда
				Slider.animate({
					duration: Slider.duration,
					draw: function draw(progress) {
						Slider.btnPrewImg.style.height = progress * 100 + "%";
						Slider.btnNextImg.style.height = progress * 100 + "%";
						Slider.display.style.opacity = progress;
					}
				});
			}, Slider.duration + 100);
		}
	};
});

//Login
(function () {
	document.addEventListener("DOMContentLoaded", function () {
		var loginForm = document.querySelector("#loginForm");

		if (loginForm) {
			loginForm.addEventListener("submit", login);
		}

		function login(e) {
			e.preventDefault();
			var data = {
				login: loginForm.login.value,
				password: loginForm.password.value
			};

			prepareSend("/login", loginForm, data, function (data) {
				if (data === "Авторизация успешна!") {
					location.href = "/admin";
				}
			});
		}
	});
})();

//prepareSend
var prepareSend = function prepareSend(url, form, data, cb) {
	var resultContainer = form.querySelector('.status');
	resultContainer.innerHTML = 'Sending...';
	sendAjax(url, data, function (data) {
		form.reset();
		resultContainer.innerHTML = data;
		if (cb) {
			cb(data);
		}
	});
};

//Ajax
var sendAjax = function sendAjax(url, data, cb) {
	var xhr = new XMLHttpRequest();
	xhr.open('POST', url, true);
	xhr.setRequestHeader('Content-Type', 'application/json');
	xhr.onload = function (e) {
		var result = void 0;
		try {
			result = JSON.parse(xhr.responseText);
		} catch (e) {
			cb('Извините в данных ошибка');
		}
		cb(result.status);
	};
	xhr.send(JSON.stringify(data));
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImZsaXAuanMiLCJwYXJhbGxheC5qcyIsIm1haW5tZW51LmpzIiwicHJlbG9hZGVyLmpzIiwic2lkZWJhci5qcyIsInNsaWRlci5qcyIsImxvZ2luLmpzIl0sIm5hbWVzIjpbInN2ZzRldmVyeWJvZHkiLCJmb3JFbGVtZW50IiwiZWxlbWVudCIsIlByb21pc2UiLCJyZXNvbHZlIiwiaXNNb2JpbGUiLCJBbmRyb2lkIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibWF0Y2giLCJCbGFja0JlcnJ5IiwiaU9TIiwiT3BlcmEiLCJXaW5kb3dzIiwiYW55IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiYXV0aG9yaXplIiwiZ2V0RWxlbWVudEJ5SWQiLCJmbGlwQ2xhc3MiLCJydW5GbGlwIiwiYm9keSIsImUiLCJ3aW5kb3ciLCJldmVudCIsImVsZW1zIiwicGF0aCIsImZsYWciLCJpIiwibGVuZ3RoIiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJlbGVtIiwiZGF0YXNldCIsImZsaXBJZCIsImNsYXNzZXMiLCJjb250YWlucyIsImFkZCIsImxheWVycyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJwYXJhbGxheCIsIndyYXBwZXIiLCJub1BhcmFsbGF4IiwiY3JlYXRlRWxlbWVudCIsIm1vdmVMYWVycyIsImluaXRpYWxYIiwiaW5uZXJXaWR0aCIsInBhZ2VYIiwiaW5pdGlhbFkiLCJpbm5lckhlaWdodCIsInBhZ2VZIiwiZGl2aWRlciIsIlgiLCJZIiwidHJhbnNmb3JtU3R5bGUiLCJzdHlsZSIsInRyYW5zZm9ybSIsInJlbW92ZUNoaWxkIiwiY2xhc3NOYW1lIiwiaW5zZXJ0QmVmb3JlIiwiJCIsIm9uIiwidG9nZ2xlQ2xhc3MiLCJwcmVsb2FkZXIiLCJwZXJjZW50cyIsImltZ1BhdGgiLCJtYXAiLCJlbCIsImJnIiwiY3NzIiwiaW1nIiwiaXMiLCJyZXBsYWNlIiwiYXR0ciIsInNldFBlcmNlbnRzIiwidG90YWwiLCJjdXJyZW50IiwicGVyc2VudHMiLCJNYXRoIiwiY2VpbCIsInRleHQiLCJmYWRlT3V0IiwibG9hZEltYWdlcyIsImltYWdlcyIsImZvckVhY2giLCJmYWtlSW1hZ2UiLCJzcmMiLCJpbml0IiwiaW1ncyIsInRvQXJyYXkiLCJibG9nIiwidGhlbiIsInNjcm9sbFNpZGViYXIiLCJzaWRlYmFyIiwibWVudSIsImxpbmsiLCJhcnRpY2xlIiwiaXNQb3NpdGlvbkFydGljbGUiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRUb3AiLCJwb3NpdGlvbkFydGljbGUiLCJ0b3AiLCJlcSIsIm9mZnNldCIsImJvdHRvbSIsIm1lbnVGaXhlZCIsInNjcm9sbCIsInBhZ2VZT2Zmc2V0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInNjcm9sbFBhZ2UiLCJzaWJsaW5ncyIsImNsaWNrT25NZW51IiwiaW5kZXgiLCJ0YXJnZXQiLCJzZWN0aW9uT2Zmc2V0Iiwib2ZmIiwiYW5pbWF0ZSIsImFkZExpc3RlbmVyIiwic2xpZGVyIiwib25sb2FkIiwiU2xpZGVyIiwiZGlzcGxheSIsImhlYWRlciIsImRlc2NyaXB0aW9uIiwic2l0ZUxpbmsiLCJidG5QcmV3IiwiYnRuTmV4dCIsImJ0blByZXdJbWciLCJidG5OZXh0SW1nIiwid29ya3MiLCJhZGREYXRhIiwiY2xpY2tpbmciLCJkdXJhdGlvbiIsInRpbWluZyIsInRpbWVGcmFjdGlvbiIsImRyYXciLCJwcm9ncmVzcyIsImNvbnNvbGUiLCJsb2ciLCJvcGFjaXR5IiwiaW5kZXhlcyIsInRvZ2dsZUluZGV4ZXMiLCJhZGRBbmltYXRlIiwiZGF0YUxpc3QiLCJxdWVyeVNlbGVjdG9yIiwiY2hpbGRyZW4iLCJsaSIsInRpdGxlIiwibmFtZSIsImRlc2MiLCJ0ZWNoIiwiaW1hZ2UiLCJ1cmwiLCJwcmV2aWV3IiwicHVzaCIsImFkZFRleHRCbG9jayIsImlubmVyVGV4dCIsImhyZWYiLCJhZGREaXNwbGF5IiwiYWx0IiwiYWRkTmV4dEltZyIsImFkZFByZXdJbWciLCJkaXNwbGF5SW5kZXgiLCJwcmV3SW5kZXgiLCJuZXh0SW5kZXgiLCJhcnIiLCJ0eXBlIiwibWF4Iiwib3B0aW9ucyIsInN0YXJ0IiwicGVyZm9ybWFuY2UiLCJub3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0aW1lIiwiaiIsImsiLCJtYXJnaW5Ub3AiLCJzZXRUaW1lb3V0IiwiaGVpZ2h0IiwibG9naW5Gb3JtIiwibG9naW4iLCJwcmV2ZW50RGVmYXVsdCIsImRhdGEiLCJ2YWx1ZSIsInBhc3N3b3JkIiwicHJlcGFyZVNlbmQiLCJsb2NhdGlvbiIsImZvcm0iLCJjYiIsInJlc3VsdENvbnRhaW5lciIsImlubmVySFRNTCIsInNlbmRBamF4IiwicmVzZXQiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzIiwic2VuZCIsInN0cmluZ2lmeSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsQ0FBQSxZQUFBO0FBQ0E7QUFDQUE7QUFDQSxDQUhBOztBQUtBO0FBQ0EsSUFBQUMsYUFBQSxTQUFBQSxVQUFBLENBQUFDLE9BQUEsRUFBQTtBQUNBLFFBQUEsSUFBQUMsT0FBQSxDQUFBLFVBQUFDLE9BQUEsRUFBQTtBQUNBLE1BQUFGLE9BQUEsRUFBQTtBQUNBRTtBQUNBO0FBQ0EsRUFKQSxDQUFBO0FBS0EsQ0FOQTs7QUFRQTtBQUNBLElBQUFDLFdBQUE7QUFDQUMsVUFBQSxtQkFBQTtBQUFBLFNBQUFDLFVBQUFDLFNBQUEsQ0FBQUMsS0FBQSxDQUFBLFVBQUEsQ0FBQTtBQUFBLEVBREE7QUFFQUMsYUFBQSxzQkFBQTtBQUFBLFNBQUFILFVBQUFDLFNBQUEsQ0FBQUMsS0FBQSxDQUFBLGFBQUEsQ0FBQTtBQUFBLEVBRkE7QUFHQUUsTUFBQSxlQUFBO0FBQUEsU0FBQUosVUFBQUMsU0FBQSxDQUFBQyxLQUFBLENBQUEsbUJBQUEsQ0FBQTtBQUFBLEVBSEE7QUFJQUcsUUFBQSxpQkFBQTtBQUFBLFNBQUFMLFVB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QUFDQSxFQXBCQTtBQXFCQSxDQXRCQTs7QUF3QkE7QUFDQSxJQUFBNEIsY0FBQSxTQUFBQSxXQUFBLENBQUFqQyxHQUFBLEVBQUFtQyxJQUFBLEVBQUFMLElBQUEsRUFBQU0sRUFBQSxFQUFBO0FBQ0EsS0FBQUMsa0JBQUFGLEtBQUEzQyxhQUFBLENBQUEsU0FBQSxDQUFBO0FBQ0E2QyxpQkFBQUMsU0FBQSxHQUFBLFlBQUE7QUFDQUMsVUFBQXZDLEdBQUEsRUFBQThCLElBQUEsRUFBQSxVQUFBQSxJQUFBLEVBQUE7QUFDQUssT0FBQUssS0FBQTtBQUNBSCxrQkFBQUMsU0FBQSxHQUFBUixJQUFBO0FBQ0EsTUFBQU0sRUFBQSxFQUFBO0FBQ0FBLE1BQUFOLElBQUE7QUFDQTtBQUNBLEVBTkE7QUFPQSxDQVZBOztBQVlBO0FBQ0EsSUFBQVMsV0FBQSxTQUFBQSxRQUFBLENBQUF2QyxHQUFBLEVBQUE4QixJQUFBLEVBQUFNLEVBQUEsRUFBQTtBQUNBLEtBQUFLLE1BQUEsSUFBQUMsY0FBQSxFQUFBO0FBQ0FELEtBQUFFLElBQUEsQ0FBQSxNQUFBLEVBQUEzQyxHQUFBLEVBQUEsSUFBQTtBQUNBeUMsS0FBQUcsZ0JBQUEsQ0FBQSxjQUFBLEVBQUEsa0JBQUE7QUFDQUgsS0FBQTFFLE1BQUEsR0FBQSxVQUFBbkcsQ0FBQSxFQUFBO0FBQ0EsTUFBQWlMLGVBQUE7QUFDQSxNQUFBO0FBQ0FBLFlBQUFDLEtBQUFDLEtBQUEsQ0FBQU4sSUFBQU8sWUFBQSxDQUFBO0FBQ0EsR0FGQSxDQUVBLE9BQUFwTCxDQUFBLEVBQUE7QUFDQXdLLE1BQUEsMEJBQUE7QUFDQTtBQUNBQSxLQUFBUyxPQUFBSSxNQUFBO0FBQ0EsRUFSQTtBQVNBUixLQUFBUyxJQUFBLENBQUFKLEtBQUFLLFNBQUEsQ0FBQXJCLElBQUEsQ0FBQTtBQUNBLENBZEEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcblx0Ly9mb3IgU1ZHLWVsZW1lbnRzIGluIElFXHJcblx0c3ZnNGV2ZXJ5Ym9keSgpOyBcclxufSkoKTtcclxuXHJcbi8v0LfQsNC/0YPRgdGC0LjRgtGMINC60LDQutGD0Y4t0LvQuNCx0L4g0YTRg9C90LrRhtC40Y4sINC10YHQu9C4IGVsZW1lbnQg0YHRg9GJ0LXRgdGC0LLRg9C10YIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbmxldCBmb3JFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XHJcblx0XHRpZihlbGVtZW50KSB7XHJcblx0XHRcdHJlc29sdmUoKTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbi8v0L/RgNC+0LLQtdGA0LrQsCDQvdCwINC80L7QsdC40LvRjNC90L7QtSDRg9GB0YLRgNC+0LnRgdGC0LLQvlxyXG5sZXQgaXNNb2JpbGUgPSB7XHJcbiAgICBBbmRyb2lkOiBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSk7IH0sXHJcbiAgICBCbGFja0JlcnJ5OiBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0JsYWNrQmVycnkvaSk7IH0sXHJcbiAgICBpT1M6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lfGlQYWR8aVBvZC9pKTsgfSxcclxuICAgIE9wZXJhOiBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL09wZXJhIE1pbmkvaSk7IH0sXHJcbiAgICBXaW5kb3dzOiBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0lFTW9iaWxlL2kpOyB9LFxyXG5cclxuICAgIGFueTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIChpc01vYmlsZS5BbmRyb2lkKCkgfHwgaXNNb2JpbGUuQmxhY2tCZXJyeSgpIHx8IGlzTW9iaWxlLmlPUygpIHx8IGlzTW9iaWxlLk9wZXJhKCkgfHwgaXNNb2JpbGUuV2luZG93cygpKTtcclxuICAgIH1cclxufTsiLCIvL0ZsaXAgZWZmZWN0XHJcbihmdW5jdGlvbigpIHtcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICBcdGxldCBhdXRob3JpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF1dGhvcml6ZVwiKSxcclxuXHRcdFx0ZmxpcENsYXNzID0gXCJmbGlwcGVyXCI7XHJcblxyXG5cdFx0Ly9sb2dpbiBmb3JtXHJcblx0XHRpZihhdXRob3JpemUpIHtcclxuXHRcdFx0YXV0aG9yaXplLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBydW5GbGlwKTtcclxuXHJcblx0XHRcdC8v0L/QtdGA0LXQstC10YDQvdGD0YLRjCDQutCw0YDRgtGDINC/0YDQuCDQutC70LjQutC1INCy0L3QtSDQtdC1XHJcblx0XHRcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZighZSkgZSA9IHdpbmRvdy5ldmVudDtcclxuXHRcdFx0XHRsZXQgZWxlbXMgPSBlLnBhdGgsXHJcblx0XHRcdFx0XHRmbGFnID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0Zm9yKGxldCBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZihlbGVtc1tpXS5pZCA9PT0gXCJhdXRob3JpemVcIiB8fCBlbGVtc1tpXS5pZCA9PT0gXCJsb2dpblwiKSB7XHJcblx0XHRcdFx0XHRcdGZsYWcgPSBmYWxzZTtcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYoZmxhZykgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpblwiKS5jbGFzc0xpc3QucmVtb3ZlKGZsaXBDbGFzcyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblxyXG5cdFx0Ly9mbGlwIGVmZmVjdFxyXG5cdFx0ZnVuY3Rpb24gcnVuRmxpcCgpIHtcclxuXHRcdFx0bGV0IGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRhdGFzZXQuZmxpcElkKSxcclxuXHRcdFx0XHRjbGFzc2VzID0gZWxlbS5jbGFzc0xpc3Q7XHJcblxyXG5cdFx0XHRjbGFzc2VzLmNvbnRhaW5zKGZsaXBDbGFzcykgPT09IHRydWUgPyBjbGFzc2VzLnJlbW92ZShmbGlwQ2xhc3MpIDogY2xhc3Nlcy5hZGQoZmxpcENsYXNzKTtcclxuXHRcdH1cclxuXHR9KTtcclxufSkoKTtcclxuIiwiLy9QYXJhbGxheFxyXG4oZnVuY3Rpb24gKCkge1xyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdGxldCBsYXllcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicGFyYWxsYXhfX2xheWVyXCIpLFxyXG5cdFx0XHRwYXJhbGxheCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFyYWxsYXhcIiksXHJcblx0XHRcdHdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwid3JhcHBlclwiKVswXSxcclxuXHRcdFx0bm9QYXJhbGxheCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG5cdFx0bGV0IG1vdmVMYWVycyA9IGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdGUgPSBlIHx8IGV2ZW50O1xyXG5cclxuXHRcdFx0bGV0IGluaXRpYWxYID0gKHdpbmRvdy5pbm5lcldpZHRoIC8gMikgLSBlLnBhZ2VYLFxyXG5cdFx0XHRcdGluaXRpYWxZID0gKHdpbmRvdy5pbm5lckhlaWdodCAvIDIpIC0gZS5wYWdlWTtcclxuXHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0bGV0IGRpdmlkZXI7XHJcblxyXG5cdFx0XHRcdGlmIChsYXllcnMubGVuZ3RoID49IDUpIGRpdmlkZXIgPSBpIC8gMTAwO1xyXG5cdFx0XHRcdGVsc2UgZGl2aWRlciA9IChpICsgMSkgLyAxMDA7XHJcblxyXG5cdFx0XHRcdGxldCBYID0gaW5pdGlhbFggKiBkaXZpZGVyLFxyXG5cdFx0XHRcdFx0WSA9IGluaXRpYWxZICogZGl2aWRlcixcclxuXHRcdFx0XHRcdHRyYW5zZm9ybVN0eWxlID0gXCJ0cmFuc2xhdGUzZChcIiArIFggKyBcInB4LCBcIiArIFkgKyBcInB4LCBcIiArIFwiMClcIjtcclxuXHJcblx0XHRcdFx0bGF5ZXJzW2ldLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVN0eWxlO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGlmKGlzTW9iaWxlLmFueSgpKSB7XHJcblx0XHRcdHdyYXBwZXIucmVtb3ZlQ2hpbGQocGFyYWxsYXgpO1xyXG5cdFx0XHRub1BhcmFsbGF4LmNsYXNzTmFtZSA9IFwicGFyYWxsYXggYmdfZm9yZXN0LWJvdHRvbVwiO1xyXG5cdFx0XHR3cmFwcGVyLmluc2VydEJlZm9yZShub1BhcmFsbGF4LCBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZm9vdGVyXCIpWzBdKTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3ZlTGFlcnMpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59KSgpO1xyXG4iLCIvL01haW4gbWVudVxyXG4vL2pRdWVyeVxyXG4kKGZ1bmN0aW9uKCkge1xyXG5cdCQoJyN0b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcblx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdoYW1idXJnZXJfb24nKTtcclxuXHRcdCQoJyNtYWluLW1lbnUnKS50b2dnbGVDbGFzcygnbWFpbi1tZW51X3RhcmdldCcpO1xyXG5cdH0pO1xyXG59KTtcclxuIiwiLy9QcmVsb2FkZXJcclxuLy9qUXVlcnlcclxubGV0IHByZWxvYWRlciA9IChmdW5jdGlvbiAoKSB7XHJcblx0bGV0IHBlcmNlbnRzID0gMCxcclxuXHRcdHByZWxvYWRlciA9ICQoXCIjcHJlbG9hZGVyXCIpO1xyXG5cclxuXHRsZXQgaW1nUGF0aCA9ICQoXCIqXCIpLm1hcChmdW5jdGlvbiAoaSwgZWwpIHtcclxuXHRcdGxldCBiZyA9ICQoZWwpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiksXHJcblx0XHRcdGltZyA9ICQoZWwpLmlzKFwiaW1nXCIpLFxyXG5cdFx0XHRwYXRoID0gXCJcIjtcclxuXHJcblx0XHRpZiAoYmcgIT0gXCJub25lXCIpIHtcclxuXHRcdFx0cGF0aCA9IGJnLnJlcGxhY2UoJ3VybChcIicsICcnKS5yZXBsYWNlKCdcIiknLCAnJyk7O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChpbWcpIHtcclxuXHRcdFx0cGF0aCA9ICQoZWwpLmF0dHIoXCJzcmNcIik7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHBhdGgpIHJldHVybiBwYXRoO1xyXG5cdH0pO1xyXG5cclxuXHRsZXQgc2V0UGVyY2VudHMgPSBmdW5jdGlvbiAodG90YWwsIGN1cnJlbnQpIHtcclxuXHRcdGxldCBwZXJzZW50cyA9IE1hdGguY2VpbChjdXJyZW50IC8gdG90YWwgKiAxMDApO1xyXG5cclxuXHRcdCQoXCIjcGVyY3JudHNcIikudGV4dChwZXJzZW50cyk7XHJcblxyXG5cdFx0aWYgKHBlcnNlbnRzID49IDEwMCkge1xyXG5cdFx0XHRwcmVsb2FkZXIuZmFkZU91dCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0bGV0IGxvYWRJbWFnZXMgPSBmdW5jdGlvbiAoaW1hZ2VzKSB7XHJcblxyXG5cdFx0aWYgKCFpbWFnZXMubGVuZ3RoKSBwcmVsb2FkZXIuZmFkZU91dCgpO1xyXG5cclxuXHRcdGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbWcsIGksIGltYWdlcykge1xyXG5cdFx0XHRsZXQgZmFrZUltYWdlID0gJChcIjxpbWc+XCIsIHtcclxuXHRcdFx0XHRhdHRyOiB7XHJcblx0XHRcdFx0XHRzcmM6IGltZ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRmYWtlSW1hZ2Uub24oXCJsb2FkIGVycm9yXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRwZXJjZW50cysrO1xyXG5cdFx0XHRcdHNldFBlcmNlbnRzKGltYWdlcy5sZW5ndGgsIHBlcmNlbnRzKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGxldCBpbWdzID0gaW1nUGF0aC50b0FycmF5KCk7XHJcblxyXG5cdFx0XHRsb2FkSW1hZ2VzKGltZ3MpO1xyXG5cdFx0fVxyXG5cdH1cclxufSgpKTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuXHRwcmVsb2FkZXIuaW5pdCgpO1xyXG59KTtcclxuIiwiLy9TaWRlYmFyXHJcbi8valF1ZXJ5XHJcbmxldCBibG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJibG9nXCIpO1xyXG5cclxuLy/QtdGB0LvQuCDRjdC70LXQvNC10L3RgiBibG9nINGB0YPRidC10YHRgtCy0YPQtdGCXHJcbmZvckVsZW1lbnQoYmxvZykudGhlbihmdW5jdGlvbiAoKSB7XHJcblx0Ly/QvNC+0LTRg9C70YwgU2lkZWJhclxyXG5cdGxldCBzY3JvbGxTaWRlYmFyID0gKGZ1bmN0aW9uICgpIHtcclxuXHRcdGxldCBzaWRlYmFyID0gJChcIi5zaWRlYmFyXCIpLFxyXG5cdFx0XHRtZW51ID0gJChcIi5zaWRlYmFyLW5hdlwiKSxcclxuXHRcdFx0bGluayA9ICQoXCIuc2lkZWJhcl9fbGlua1wiKSxcclxuXHRcdFx0YXJ0aWNsZSA9ICQoXCIuYXJ0aWNsZVwiKSxcclxuXHRcdFx0Ym9keSA9IGRvY3VtZW50LmJvZHksXHJcblx0XHRcdGlzUG9zaXRpb25BcnRpY2xlID0gW10sXHJcblx0XHRcdG9mZnNldEhlaWdodCA9ICQoXCIuYmxvZ19fY29udGVudFwiKVswXS5vZmZzZXRUb3AgLSAkKFwiLm1haW5cIilbMF0ub2Zmc2V0VG9wO1xyXG5cclxuXHRcdGxldCBwb3NpdGlvbkFydGljbGUgPSBmdW5jdGlvbiAoZWwpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBlbC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlzUG9zaXRpb25BcnRpY2xlW2ldID0ge307XHJcblx0XHRcdFx0aXNQb3NpdGlvbkFydGljbGVbaV0udG9wID0gZWxcclxuXHRcdFx0XHRcdC5lcShpKVxyXG5cdFx0XHRcdFx0Lm9mZnNldCgpXHJcblx0XHRcdFx0XHQudG9wIC0gb2Zmc2V0SGVpZ2h0O1xyXG5cdFx0XHRcdGlzUG9zaXRpb25BcnRpY2xlW2ldLmJvdHRvbSA9IGlzUG9zaXRpb25BcnRpY2xlW2ldLnRvcCArIGVsXHJcblx0XHRcdFx0XHQuZXEoaSlcclxuXHRcdFx0XHRcdC5pbm5lckhlaWdodCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGxldCBtZW51Rml4ZWQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGxldCBzY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcblxyXG5cdFx0XHRpZiAoc2Nyb2xsIDwgYXJ0aWNsZS5vZmZzZXQoKS50b3ApIHtcclxuXHRcdFx0XHRzaWRlYmFyLnJlbW92ZUNsYXNzKFwiZml4ZWRcIik7XHJcblx0XHRcdFx0JChcIi5ibG9nX19jb250ZW50XCIpLnJlbW92ZUNsYXNzKFwibmF2LWZpeGVkXCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHNpZGViYXIuYWRkQ2xhc3MoXCJmaXhlZFwiKTtcclxuXHRcdFx0XHQkKFwiLmJsb2dfX2NvbnRlbnRcIikuYWRkQ2xhc3MoXCJuYXYtZml4ZWRcIik7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0bGV0IHNjcm9sbFBhZ2UgPSBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRsZXQgc2Nyb2xsID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG5cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBpc1Bvc2l0aW9uQXJ0aWNsZS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmIChzY3JvbGwgPj0gaXNQb3NpdGlvbkFydGljbGVbaV0udG9wICYmIHNjcm9sbCA8PSBpc1Bvc2l0aW9uQXJ0aWNsZVtpXS5ib3R0b20pIHtcclxuXHRcdFx0XHRcdGxpbmtcclxuXHRcdFx0XHRcdFx0LmVxKGkpXHJcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyhcInNpZGViYXJfX2xpbmtfYWN0aXZlXCIpXHJcblx0XHRcdFx0XHRcdC5zaWJsaW5ncygpXHJcblx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhcInNpZGViYXJfX2xpbmtfYWN0aXZlXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRsZXQgY2xpY2tPbk1lbnUgPSBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRsZXQgaW5kZXggPSAkKGUudGFyZ2V0KS5pbmRleCgpO1xyXG5cdFx0XHRsZXQgc2VjdGlvbk9mZnNldCA9IGFydGljbGVcclxuXHRcdFx0XHQuZXEoaW5kZXgpXHJcblx0XHRcdFx0Lm9mZnNldCgpXHJcblx0XHRcdFx0LnRvcDtcclxuXHRcdFx0JChkb2N1bWVudCkub2ZmKFwic2Nyb2xsXCIsIHNjcm9sbFBhZ2UpO1xyXG5cdFx0XHQkKFwiYm9keSwgaHRtbFwiKS5hbmltYXRlKHtcclxuXHRcdFx0XHRcInNjcm9sbFRvcFwiOiBzZWN0aW9uT2Zmc2V0XHJcblx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQkKGUudGFyZ2V0KVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKFwic2lkZWJhcl9fbGlua19hY3RpdmVcIilcclxuXHRcdFx0XHRcdC5zaWJsaW5ncygpXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoXCJzaWRlYmFyX19saW5rX2FjdGl2ZVwiKTtcclxuXHRcdFx0XHQkKGRvY3VtZW50KS5vbihcInNjcm9sbFwiLCBzY3JvbGxQYWdlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGxldCBhZGRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JChtZW51KS5vbihcImNsaWNrXCIsIGNsaWNrT25NZW51KTtcclxuXHJcblx0XHRcdCQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIHNjcm9sbFBhZ2UpO1xyXG5cdFx0XHQkKGRvY3VtZW50KS5vbihcInNjcm9sbFwiLCBtZW51Rml4ZWQpO1xyXG5cclxuXHRcdFx0JCh3aW5kb3cpLm9uKFwibG9hZFwiLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdHBvc2l0aW9uQXJ0aWNsZShhcnRpY2xlKTtcclxuXHRcdFx0fSlcclxuXHJcblx0XHRcdCQod2luZG93KS5vbihcInJlc2l6ZVwiLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdHBvc2l0aW9uQXJ0aWNsZShhcnRpY2xlKTtcclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpbml0OiBhZGRMaXN0ZW5lclxyXG5cdFx0fVxyXG5cdH0pKCk7XHJcblxyXG5cdHNjcm9sbFNpZGViYXIuaW5pdCgpO1xyXG5cclxuXHQvL3RvZ2dsZSBjbGFzcyBcclxuXHQkKFwiI2J0blwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoXCIjYmxvZ1wiKS50b2dnbGVDbGFzcyhcIm9uXCIpO1xyXG5cdH0pO1xyXG59KTtcdFxyXG4iLCIvL1NsaWRlclxyXG5sZXQgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGlkZXJcIik7XHJcblxyXG5mb3JFbGVtZW50KHNsaWRlcikudGhlbihmdW5jdGlvbigpIHtcclxuXHR3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRTbGlkZXIuaW5pdCgpO1xyXG5cdH07XHJcblxyXG5cdGxldCBTbGlkZXIgPSB7XHJcblx0XHRpbml0KCkge1xyXG5cdFx0XHR0aGlzLmRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpc3BsYXlcIik7XHJcblx0XHRcdHRoaXMuaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXJcIik7XHJcblx0XHRcdHRoaXMuZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpO1xyXG5cdFx0XHR0aGlzLnNpdGVMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaXRlTGlua1wiKTtcclxuXHRcdFx0dGhpcy5idG5QcmV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5QcmV3XCIpO1xyXG5cdFx0XHR0aGlzLmJ0bk5leHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0bk5leHRcIik7XHJcblx0XHRcdHRoaXMuYnRuUHJld0ltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuUHJld0ltZ1wiKTtcclxuXHRcdFx0dGhpcy5idG5OZXh0SW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5OZXh0SW1nXCIpO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy53b3JrcyA9IFtdO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5hZGREYXRhKCk7XHJcblxyXG5cdFx0XHQvL9C30LDQv9C+0LvQvdC40YLRjCDRgdC70LDQudC00LXRgCDQv9C10YDQstC+0L3QsNGH0LDQu9GM0L3Ri9C80Lgg0LTQsNC90L3Ri9C80LhcclxuXHRcdFx0U2xpZGVyLmNsaWNraW5nKDAsICh0aGlzLndvcmtzLmxlbmd0aCAtIDEpLCAxKTtcclxuXHJcblx0XHRcdHRoaXMuZHVyYXRpb24gPSAxMDAwO1xyXG5cclxuXHRcdFx0dGhpcy5kaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRTbGlkZXIuYW5pbWF0ZSh7XHJcblx0XHRcdFx0XHRkdXJhdGlvbjogMzAwMCxcclxuXHRcdFx0XHRcdHRpbWluZzogZnVuY3Rpb24odGltZUZyYWN0aW9uKSB7IHJldHVybiB0aW1lRnJhY3Rpb247IH0sXHJcblx0XHRcdFx0XHRkcmF3OiBmdW5jdGlvbihwcm9ncmVzcykge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhwcm9ncmVzcyk7XHJcblx0XHRcdFx0XHRcdFNsaWRlci5kaXNwbGF5LnN0eWxlLm9wYWNpdHkgPSBwcm9ncmVzcztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvL0FqYXhcclxuXHRcdFx0Lyp0aGlzLmRhdGEoXCIvYXNzZXRzL2pzb24vc2xpZGVyLmpzb25cIilcclxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihkYXRhQXJyYXkpIHtcclxuXHRcdFx0XHRcdGZvcihsZXQgaSA9IDA7IGkgPCBkYXRhQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLndvcmtzLnB1c2goZGF0YUFycmF5W2ldKTtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLndvcmtzW2ldLmluZGV4ID0gaTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8v0LfQsNC/0L7Qu9C90LjRgtGMINGB0LvQsNC50LTQtdGAINC/0LXRgNCy0L7QvdCw0YfQsNC70YzQvdGL0LzQuCDQtNCw0L3QvdGL0LzQuFxyXG5cdFx0XHRcdFx0U2xpZGVyLmNsaWNraW5nKDAsIChkYXRhQXJyYXkubGVuZ3RoIC0gMSksIDEpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHN0YXR1cykge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcItCa0L7QtCDQvtGC0LLQtdGC0LA6IFwiLCBzdGF0dXMpO1xyXG5cdFx0XHRcdH0pOyovXHJcblxyXG5cclxuXHRcdFx0Ly9FdmVudHNcclxuXHRcdFx0dGhpcy5idG5QcmV3LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdGxldCBpbmRleGVzID0gW1xyXG5cdFx0XHRcdFx0XHRTbGlkZXIuZGlzcGxheS5kYXRhc2V0LmluZGV4LCBcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmJ0blByZXdJbWcuZGF0YXNldC5pbmRleCwgXHJcblx0XHRcdFx0XHRcdFNsaWRlci5idG5OZXh0SW1nLmRhdGFzZXQuaW5kZXhcclxuXHRcdFx0XHRcdF07XHJcblxyXG5cdFx0XHRcdFNsaWRlci50b2dnbGVJbmRleGVzKGluZGV4ZXMsIFwibWludXNcIik7XHJcblx0XHRcdFx0U2xpZGVyLmFkZEFuaW1hdGUoaW5kZXhlc1swXSwgaW5kZXhlc1sxXSwgaW5kZXhlc1syXSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5idG5OZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRsZXQgaW5kZXhlcyA9IFtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmRpc3BsYXkuZGF0YXNldC5pbmRleCwgXHJcblx0XHRcdFx0XHRcdFNsaWRlci5idG5QcmV3SW1nLmRhdGFzZXQuaW5kZXgsIFxyXG5cdFx0XHRcdFx0XHRTbGlkZXIuYnRuTmV4dEltZy5kYXRhc2V0LmluZGV4XHJcblx0XHRcdFx0XHRdO1xyXG5cclxuXHRcdFx0XHRTbGlkZXIudG9nZ2xlSW5kZXhlcyhpbmRleGVzLCBcInBsdXNcIik7XHJcblx0XHRcdFx0U2xpZGVyLmFkZEFuaW1hdGUoaW5kZXhlc1swXSwgaW5kZXhlc1sxXSwgaW5kZXhlc1syXSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRhZGREYXRhKCkge1xyXG5cdFx0XHRsZXQgZGF0YUxpc3QgPSBzbGlkZXIucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX2RhdGFcIik7XHJcblxyXG5cdFx0XHRmb3IobGV0IGkgPSAwOyBpIDwgZGF0YUxpc3QuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRsZXQgbGkgPSB7XHJcblx0XHRcdFx0XHR0aXRsZTogZGF0YUxpc3QuY2hpbGRyZW5baV0uZGF0YXNldC5uYW1lLFxyXG5cdFx0XHRcdFx0ZGVzYzogZGF0YUxpc3QuY2hpbGRyZW5baV0uZGF0YXNldC50ZWNoLFxyXG5cdFx0XHRcdFx0aW1hZ2U6IGRhdGFMaXN0LmNoaWxkcmVuW2ldLmRhdGFzZXQudXJsLFxyXG5cdFx0XHRcdFx0cHJldmlldzogZGF0YUxpc3QuY2hpbGRyZW5baV0uZGF0YXNldC51cmwsXHJcblx0XHRcdFx0XHRsaW5rOiBkYXRhTGlzdC5jaGlsZHJlbltpXS5kYXRhc2V0LmxpbmssXHJcblx0XHRcdFx0XHRpbmRleDogaVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRTbGlkZXIud29ya3MucHVzaChsaSk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qZGF0YSh1cmwpIHtcclxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG5cdFx0XHRcdGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdFx0XHR4aHIub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG5cdFx0XHRcdHhoci5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcclxuXHRcdFx0XHR4aHIuc2VuZCgpO1xyXG5cdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGlmKHhoci5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XHJcblx0XHRcdFx0XHRpZih4aHIuc3RhdHVzICE9PSAyMDApIHtcclxuXHRcdFx0XHRcdFx0cmVqZWN0KHhoci5zdGF0dXMpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0cmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH0pO1xyXG5cdFx0fSwqL1xyXG5cclxuXHRcdGFkZFRleHRCbG9jayhpbmRleCkge1xyXG5cdFx0XHR0aGlzLmhlYWRlci5pbm5lclRleHQgPSB0aGlzLndvcmtzW2luZGV4XS50aXRsZTtcclxuXHRcdFx0dGhpcy5kZXNjcmlwdGlvbi5pbm5lclRleHQgPSB0aGlzLndvcmtzW2luZGV4XS5kZXNjO1xyXG5cdFx0XHR0aGlzLnNpdGVMaW5rLmhyZWYgPSB0aGlzLndvcmtzW2luZGV4XS5saW5rO1xyXG5cdFx0fSxcclxuXHJcblx0XHRhZGREaXNwbGF5KGluZGV4KSB7XHJcblx0XHRcdHRoaXMuZGlzcGxheS5zcmMgPSB0aGlzLndvcmtzW2luZGV4XS5pbWFnZTtcclxuXHRcdFx0dGhpcy5kaXNwbGF5LmFsdCA9IHRoaXMud29ya3NbaW5kZXhdLnRpdGxlO1xyXG5cdFx0XHR0aGlzLmRpc3BsYXkuZGF0YXNldC5pbmRleCA9IGluZGV4O1xyXG5cdFx0fSxcclxuXHJcblx0XHRhZGROZXh0SW1nKGluZGV4KSB7XHJcblx0XHRcdHRoaXMuYnRuTmV4dEltZy5zcmMgPSB0aGlzLndvcmtzW2luZGV4XS5wcmV2aWV3O1xyXG5cdFx0XHR0aGlzLmJ0bk5leHRJbWcuYWx0ID0gdGhpcy53b3Jrc1tpbmRleF0udGl0bGU7XHJcblx0XHRcdHRoaXMuYnRuTmV4dEltZy5kYXRhc2V0LmluZGV4ID0gaW5kZXg7XHJcblx0XHR9LFxyXG5cclxuXHRcdGFkZFByZXdJbWcoaW5kZXgpIHtcclxuXHRcdFx0dGhpcy5idG5QcmV3SW1nLnNyYyA9IHRoaXMud29ya3NbaW5kZXhdLnByZXZpZXc7XHJcblx0XHRcdHRoaXMuYnRuUHJld0ltZy5hbHQgPSB0aGlzLndvcmtzW2luZGV4XS50aXRsZTtcclxuXHRcdFx0dGhpcy5idG5QcmV3SW1nLmRhdGFzZXQuaW5kZXggPSBpbmRleDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Y2xpY2tpbmcoZGlzcGxheUluZGV4LCBwcmV3SW5kZXgsIG5leHRJbmRleCkge1xyXG5cdFx0XHQvL21haW4gY29udGVudCBpbiB0aGUgc2xpZGVyOiBiaWcgcGljdHVyZSwgdGl0bGUsIGRlc2NyaXB0aW9uIGFuZCBsaW5rXHJcblx0XHRcdHRoaXMuYWRkRGlzcGxheShkaXNwbGF5SW5kZXgpO1xyXG5cdFx0XHR0aGlzLmFkZFRleHRCbG9jayhkaXNwbGF5SW5kZXgpO1xyXG5cdFx0XHQvL3NtYWxsIGltYWdlIG9uIHRoZSBidXR0b24gXCJwcmV2aW91cyB3b3JrXCJcclxuXHRcdFx0dGhpcy5hZGRQcmV3SW1nKHByZXdJbmRleCk7XHJcblx0XHRcdC8vc21hbGwgaW1hZ2Ugb24gdGhlIGJ1dHRvbiBcIm5leHQgd29ya1wiXHJcblx0XHRcdHRoaXMuYWRkTmV4dEltZyhuZXh0SW5kZXgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0b2dnbGVJbmRleGVzKGFyciwgdHlwZSkge1xyXG5cdFx0XHRsZXQgbWF4ID0gdGhpcy53b3Jrcy5sZW5ndGggLSAxO1xyXG5cclxuXHRcdFx0Zm9yKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHN3aXRjaCh0eXBlKSB7XHJcblx0XHRcdFx0XHRjYXNlIFwicGx1c1wiIDpcclxuXHRcdFx0XHRcdFx0aWYoYXJyW2ldID09IG1heCkgYXJyW2ldID0gMDtcclxuXHRcdFx0XHRcdFx0ZWxzZSBhcnJbaV0rKztcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFwibWludXNcIiA6XHJcblx0XHRcdFx0XHRcdGlmKGFycltpXSA9PSAwKSBhcnJbaV0gPSBtYXg7XHJcblx0XHRcdFx0XHRcdGVsc2UgYXJyW2ldLS07XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0YW5pbWF0ZShvcHRpb25zKSB7XHJcblx0XHRcdGxldCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cclxuXHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIGFuaW1hdGUodGltZSkge1xyXG5cdFx0XHRcdC8vIHRpbWVGcmFjdGlvbiDQvtGCIDAg0LTQviAxXHJcblx0XHRcdFx0bGV0IHRpbWVGcmFjdGlvbiA9ICh0aW1lIC0gc3RhcnQpIC8gb3B0aW9ucy5kdXJhdGlvbjtcclxuXHRcdFx0XHRpZiAodGltZUZyYWN0aW9uID4gMSkgdGltZUZyYWN0aW9uID0gMTtcclxuXHJcblx0XHRcdFx0Ly8g0YLQtdC60YPRidC10LUg0YHQvtGB0YLQvtGP0L3QuNC1INCw0L3QuNC80LDRhtC40LhcclxuXHRcdFx0XHRsZXQgcHJvZ3Jlc3MgPSB0aW1lRnJhY3Rpb247XHJcblx0XHRcdFx0Ly/RhNGD0L3QutGG0LjRjywg0L7Qv9C40YHRi9Cy0LDRjtGJ0LDRjyDQsNC90LjQvNCw0YbQuNGOXHJcblx0XHRcdFx0b3B0aW9ucy5kcmF3KHByb2dyZXNzKTtcclxuXHJcblx0XHRcdFx0aWYgKHRpbWVGcmFjdGlvbiA8IDEpIHtcclxuXHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRhZGRBbmltYXRlKGksIGosIGspIHtcclxuXHRcdFx0Ly/QsNC90LjQvNCw0YbQuNGPINC00L4g0L/QtdGA0LXQutC70Y7Rh9C10L3QuNGPINGB0LvQsNC50LTQsFxyXG5cdFx0XHRTbGlkZXIuYW5pbWF0ZSh7XHJcblx0XHRcdFx0ZHVyYXRpb246IFNsaWRlci5kdXJhdGlvbixcclxuXHRcdFx0XHRkcmF3OiBmdW5jdGlvbiAocHJvZ3Jlc3MpIHtcclxuXHRcdFx0XHRcdFNsaWRlci5idG5QcmV3SW1nLnN0eWxlLm1hcmdpblRvcCA9IHByb2dyZXNzICogNjAwICsgXCJweFwiO1xyXG5cdFx0XHRcdFx0U2xpZGVyLmJ0bk5leHRJbWcuc3R5bGUubWFyZ2luVG9wID0gcHJvZ3Jlc3MgKiAtNjAwICsgXCJweFwiO1xyXG5cdFx0XHRcdFx0U2xpZGVyLmRpc3BsYXkuc3R5bGUub3BhY2l0eSA9IDEgLSBwcm9ncmVzcztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0U2xpZGVyLmNsaWNraW5nKGksIGosIGspO1xyXG5cclxuXHRcdFx0XHRTbGlkZXIuYnRuUHJld0ltZy5zdHlsZS5tYXJnaW5Ub3AgPSAwICsgXCJweFwiO1xyXG5cdFx0XHRcdFNsaWRlci5idG5QcmV3SW1nLnN0eWxlLmhlaWdodCA9IDAgKyBcIiVcIjtcclxuXHRcdFx0XHRTbGlkZXIuYnRuTmV4dEltZy5zdHlsZS5tYXJnaW5Ub3AgPSAwICsgXCJweFwiO1xyXG5cdFx0XHRcdFNsaWRlci5idG5OZXh0SW1nLnN0eWxlLmhlaWdodCA9IDAgKyBcIiVcIjtcclxuXHJcblx0XHRcdFx0Ly/QsNC90LjQvNCw0YbQuNGPINC/0L7RgdC70LUg0L/QtdGA0LXQutC70Y7Rh9C10L3QuNGPINGB0LvQsNC50LTQsFxyXG5cdFx0XHRcdFNsaWRlci5hbmltYXRlKHtcclxuXHRcdFx0XHRcdGR1cmF0aW9uOiBTbGlkZXIuZHVyYXRpb24sXHJcblx0XHRcdFx0XHRkcmF3OiBmdW5jdGlvbiAocHJvZ3Jlc3MpIHtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmJ0blByZXdJbWcuc3R5bGUuaGVpZ2h0ID0gcHJvZ3Jlc3MgKiAxMDAgKyBcIiVcIjtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmJ0bk5leHRJbWcuc3R5bGUuaGVpZ2h0ID0gcHJvZ3Jlc3MgKiAxMDAgKyBcIiVcIjtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmRpc3BsYXkuc3R5bGUub3BhY2l0eSA9IHByb2dyZXNzO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LCAoU2xpZGVyLmR1cmF0aW9uICsgMTAwKSk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuIiwiLy9Mb2dpblxyXG4oZnVuY3Rpb24oKSB7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRjb25zdCBsb2dpbkZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xvZ2luRm9ybVwiKTtcclxuXHJcblx0XHRpZihsb2dpbkZvcm0pIHtcclxuXHRcdFx0bG9naW5Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgbG9naW4pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKGUpIHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRsZXQgZGF0YSA9IHtcclxuXHRcdFx0XHRsb2dpbjogbG9naW5Gb3JtLmxvZ2luLnZhbHVlLFxyXG5cdFx0XHRcdHBhc3N3b3JkOiBsb2dpbkZvcm0ucGFzc3dvcmQudmFsdWVcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHByZXBhcmVTZW5kKFwiL2xvZ2luXCIsIGxvZ2luRm9ybSwgZGF0YSwgZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRcdGlmKGRhdGEgPT09IFwi0JDQstGC0L7RgNC40LfQsNGG0LjRjyDRg9GB0L/QtdGI0L3QsCFcIikge1xyXG5cdFx0XHRcdFx0bG9jYXRpb24uaHJlZiA9IFwiL2FkbWluXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9KTtcclxufSkoKTtcclxuXHJcbi8vcHJlcGFyZVNlbmRcclxudmFyIHByZXBhcmVTZW5kID0gZnVuY3Rpb24odXJsLCBmb3JtLCBkYXRhLCBjYikge1xyXG4gIGxldCByZXN1bHRDb250YWluZXIgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zdGF0dXMnKTtcclxuICByZXN1bHRDb250YWluZXIuaW5uZXJIVE1MID0gJ1NlbmRpbmcuLi4nO1xyXG4gIHNlbmRBamF4KHVybCwgZGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIGZvcm0ucmVzZXQoKTtcclxuICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgPSBkYXRhO1xyXG4gICAgaWYgKGNiKSB7XHJcbiAgICAgIGNiKGRhdGEpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuLy9BamF4XHJcbnZhciBzZW5kQWpheCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY2IpIHtcclxuICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwsIHRydWUpO1xyXG4gIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xyXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgbGV0IHJlc3VsdDtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNiKCfQmNC30LLQuNC90LjRgtC1INCyINC00LDQvdC90YvRhSDQvtGI0LjQsdC60LAnKTtcclxuICAgIH1cclxuICAgIGNiKHJlc3VsdC5zdGF0dXMpO1xyXG4gIH07XHJcbiAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG59OyJdfQ==
